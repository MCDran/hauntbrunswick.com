{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst mysql = require('mysql2');\nconst crypto = require('crypto'); // For generating registration numbers\nconst nodemailer = require('nodemailer');\nconst QRCode = require('qrcode');\nconst path = require('path');\nconst app = express();\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(express.static('public'));\napp.use(express.json());\n\n// MySQL connection setup\nconst connection = mysql.createPool({\n  host: '100.87.150.78',\n  // 192.168.100.100\n  port: '3667',\n  user: 'valak',\n  password: 'SLEEP4tG',\n  database: 'MYSQL_DATABASE',\n  connectionLimit: 10 // Adjust as needed\n});\n\nsetInterval(() => {\n  connection.query('SELECT 1', err => {\n    if (err) console.error('Error with keep-alive query:', err);\n  });\n}, 10000); // Ping every 10 seconds\n\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\n  if (err) {\n    console.error('Error querying MySQL:', err.stack);\n  } else {\n    console.log('Test query successful, solution:', results[0].solution);\n  }\n});\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    // Your Office 365 email\n    pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\n  },\n\n  tls: {\n    rejectUnauthorized: false // This might help if there's an issue with the certificate\n  }\n});\n\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\n  // Generate the QR code\n  const qrCodeURL = await generateQRCode(registrationNumber, email);\n  const qrCodeData = `${registrationNumber}:${email}`;\n  const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\n  console.log(qrCodeURL);\n\n  // Email content with the embedded QR code\n  const emailContent = `\n        <h1>Thank you for registering!</h1>\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\n        <p>Time Slot: ${timeSlot}</p>\n        <p>Names of attendees: ${names.join(', ')}</p>\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\n        <p>Use the QR code below when checking in:</p>\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\n    `;\n\n  // Use Nodemailer to send the email (you likely have this setup already)\n  const mailOptions = {\n    from: 'donotreply@hauntbrunswick.com',\n    to: email,\n    subject: 'Your Haunted House Registration Confirmation',\n    html: emailContent,\n    attachments: [{\n      filename: 'qrcode.png',\n      content: qrCodeBuffer,\n      cid: 'qrCode' // Same CID as in the email content\n    }]\n  };\n\n  // Send the email\n  transporter.sendMail(mailOptions, (error, info) => {\n    if (error) {\n      console.error('Error sending email:', error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n}\nasync function generateQRCode(registrationNumber, email) {\n  try {\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\n    return qrCodeURL;\n  } catch (err) {\n    console.error('Failed to generate QR Code', err);\n    throw err;\n  }\n}\n\n// In-memory storage of available spots (this could also be in the database)\nlet availableSlots = {\n  '6:00 PM': 20,\n  '6:15 PM': 20,\n  '6:30 PM': 20,\n  '6:45 PM': 20,\n  '7:00 PM': 20,\n  '7:15 PM': 20,\n  '7:30 PM': 20,\n  '7:45 PM': 20,\n  '8:00 PM': 20,\n  '8:15 PM': 20,\n  '8:30 PM': 20,\n  '8:45 PM': 20\n};\nfunction generateRegistrationNumber() {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0'); // DD\n  const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\n  const year = String(now.getFullYear()).slice(-2); // YY\n  const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\n  return `LC-${day}${month}${year}-${randomFourDigits}`;\n}\n\n//View registration\napp.post('/view-registration', (req, res) => {\n  const {\n    registration_number,\n    email\n  } = req.body;\n\n  // Query to find the registration based on registration number and email\n  const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sql, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const namesArray = registration.names.split(', ');\n    const agesArray = registration.ages.split(', ');\n    let registrationDetails = `\n            <head>\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                <title>Modify Registration</title>\n            </head>\n            <h2>Registration Details</h2>\n            <p>Registration Number: ${registration.registration_number}</p>\n            <p>Email: ${registration.email}</p>\n            <p>Time Slot: ${registration.time_slot}</p>\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\n        `;\n\n    // Generate attendee fields for modification\n    namesArray.forEach((name, index) => {\n      registrationDetails += `\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\n                    <label for=\"name${index + 1}\">Name:</label>\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\n                    <label for=\"age${index + 1}\">Age:</label>\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\n                        <option value=\"21+\" ${agesArray[index] === '21+' ? 'selected' : ''}>21+</option>\n                    </select>\n                    <button type=\"button\" class=\"remove\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\n                </div>\n            `;\n    });\n\n    // Add \"Remove All\" button and submit button\n    registrationDetails += `\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\n            </form>\n\n            <script>\n                // Function to remove individual attendees\n                function removeAttendee(index) {\n                    const attendeeElement = document.getElementById('attendee-' + index);\n                    attendeeElement.remove();\n                }\n\n                // Function to confirm removing all attendees\n                function confirmRemoveAll() {\n                    const attendeeElements = document.querySelectorAll('.attendee');\n\n                    if (attendeeElements.length === 0) {\n                        alert(\"No registrants to remove.\");\n                        return;\n                    }\n\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\n                    if (confirmed) {\n                        attendeeElements.forEach(attendee => attendee.remove());\n                    }\n                }\n            </script>\n        `;\n\n    // Return the registration details to the user\n    res.send(registrationDetails);\n  });\n});\napp.post('/modify-registration', (req, res) => {\n  const {\n    registration_number,\n    email,\n    names,\n    ages\n  } = req.body;\n\n  // Query to find the existing registration before making changes\n  const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sqlFind, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\n\n    // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\n    if (!names || names.length === 0) {\n      const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\n      connection.query(sqlDelete, [registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Removal Failed</title>\n                        </head>\n                        <h1>Error</h1>\n                        <p>There was an issue removing your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Add back all spots when registration is removed\n        const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n        connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], err => {\n          if (err) {\n            return res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Error Updating</title>\n                            </head>\n                            <h1>Error Updating Spots</h1>\n                            <p>There was an issue updating the available spots for the time slot.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          }\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Removed</title>\n                        </head>\n                        <h1>Registration Removed</h1>\n                        <p>Your registration has been successfully removed.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        });\n      });\n    } else {\n      // Calculate the difference in registrant count (if any registrants were added or removed)\n      const newRegistrantCount = names.length;\n      const difference = existingRegistrantCount - newRegistrantCount;\n\n      // Safeguard for undefined names or ages when joining\n      const namesString = names && names.length ? names.join(', ') : '';\n      const agesString = ages && ages.length ? ages.join(', ') : '';\n      const sqlUpdate = `\n                UPDATE registrations\n                SET names = ?, ages = ?\n                WHERE registration_number = ? AND email = ?\n            `;\n      connection.query(sqlUpdate, [namesString, agesString, registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Update Failed</title>\n                        </head>\n                        <h1>Update Failed</h1>\n                        <p>There was an issue updating your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Update spots remaining based on the difference in registrants\n        if (difference !== 0) {\n          const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n          connection.query(sqlUpdateSpots, [difference, registration.time_slot], err => {\n            if (err) {\n              return res.send(`\n                                <head>\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                    <title>Update Failed</title>\n                                </head>\n                                <h1>Error Updating Spots</h1>\n                                <p>There was an issue updating the available spots for the time slot.</p>\n                                <a href=\"/\">Go back to the home page</a>\n                            `);\n            }\n            res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Registration Updated</title>\n                            </head>\n                            <h1>Registration Updated</h1>\n                            <p>Your registration has been successfully updated.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          });\n        } else {\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Updated</title>\n                        </head>\n                        <h1>Registration Updated</h1>\n                        <p>Your registration has been successfully updated.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        }\n      });\n    }\n  });\n});\n\n//ADMIN page\nconst adminPassword = 'SLEEP4tG'; // Replace with your actual password\n\n// Middleware to protect the admin route\nfunction checkAdminAuth(req, res, next) {\n  const auth = req.headers['authorization'];\n  if (!auth) {\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n    return res.status(401).send('Authentication required.');\n  }\n  const encoded = auth.split(' ')[1];\n  const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\n  const [username, password] = decoded.split(':');\n  if (username === 'admin' && password === adminPassword) {\n    return next();\n  }\n  res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n  return res.status(401).send('Authentication failed.');\n}\napp.get('/admin', checkAdminAuth, (req, res) => {\n  const sql = 'SELECT * FROM registrations ORDER BY time_slot';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.send('Error retrieving registrations.');\n    }\n\n    // Create HTML table for the registrations\n    let html = `\n            <h1>Admin: View Registrations</h1>\n            <table border=\"1\">\n                <tr>\n                    <th>Registration Number</th>\n                    <th>Email</th>\n                    <th>Time Slot</th>\n                    <th>Names</th>\n                    <th>Ages</th>\n                    <th>Action</th>\n                </tr>\n                <p>V0.5.5</p>\n        `;\n    results.forEach(registration => {\n      html += `\n                <tr>\n                    <td>${registration.registration_number}</td>\n                    <td>${registration.email}</td>\n                    <td>${registration.time_slot}</td>\n                    <td>${registration.names}</td>\n                    <td>${registration.ages}</td>\n                    <td>\n                        <form action=\"/admin/delete\" method=\"POST\">\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\n                            <button type=\"submit\">Remove</button>\n                        </form>\n                    </td>\n                </tr>\n            `;\n    });\n    html += '</table>';\n    res.send(html);\n  });\n});\napp.post('/register', async (req, res) => {\n  const {\n    email,\n    registrationNumber,\n    timeSlot,\n    names,\n    viewUrl\n  } = req.body;\n  try {\n    await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n    res.status(200).send('Registration successful, email sent.');\n  } catch (error) {\n    res.status(500).send('Registration successful, but email failed.');\n  }\n});\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\n  const registrationNumber = req.body.registration_number;\n\n  // Retrieve the registration details\n  const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\n  connection.query(sqlSelect, [registrationNumber], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send('Error finding the registration.');\n    }\n    const registration = results[0];\n    const numberOfPeople = registration.names.split(', ').length; // Split by comma to count names\n\n    // Delete the registration from the database\n    const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\n    connection.query(sqlDelete, [registrationNumber], err => {\n      if (err) {\n        return res.send('Error deleting the registration.');\n      }\n\n      // Add back the number of spots to the time slot\n      const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n      connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], err => {\n        if (err) {\n          return res.send('Error updating spots.');\n        }\n        res.redirect('/admin'); // Refresh the admin page after deletion\n      });\n    });\n  });\n});\n\n// Serve the landing and registration pages\napp.get('/', (req, res) => {\n  res.sendFile(__dirname + '/public/index.html');\n});\napp.get('/register.html', (req, res) => {\n  res.sendFile(__dirname + '/public/register.html');\n});\napp.get('/formtest', (req, res) => {\n  res.sendFile(__dirname + '/public/formtest.html');\n});\napp.get('/faq', (req, res) => {\n  res.sendFile(__dirname + '/public/faq.html');\n});\napp.get('/what-to-expect', (req, res) => {\n  res.sendFile(__dirname + '/public/wte.html');\n});\napp.get('/spots', (req, res) => {\n  const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.status(500).json({\n        error: 'Error fetching available spots'\n      });\n    }\n    res.json(results);\n  });\n});\n\n// Handle form submission\napp.post('/submit', (req, res) => {\n  const {\n    timeSlot,\n    email,\n    names,\n    ages\n  } = req.body;\n  const registrationNumber = generateRegistrationNumber();\n\n  // Step 1: Check the remaining spots from the database\n  const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\n  connection.query(checkSpotsSql, [timeSlot], (err, results) => {\n    if (err || results.length === 0) {\n      console.error('Error checking spots:', err);\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Could not retrieve available spots. Please try again later.</p>\n                <a href=\"/register.html\">Go back</a>\n            `);\n    }\n    const spotsRemaining = results[0].spots_remaining;\n\n    // Step 2: Check if there are enough spots\n    if (spotsRemaining < names.length) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\n                <a href=\"/register.html\">Go back and try another slot</a>\n            `);\n    }\n\n    // Step 3: Deduct the number of registered people from the available spots\n    const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\n    connection.query(updateSpotsSql, [names.length, timeSlot], err => {\n      if (err) {\n        console.error('Error updating spots:', err);\n        return res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Registration Failed</title>\n                    </head>\n                    <h1>Registration Failed</h1>\n                    <p>Could not update available spots. Please try again later.</p>\n                    <a href=\"/register.html\">Go back</a>\n                `);\n      }\n\n      // Step 4: Save registration to the MySQL database\n      const sql = `\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\n                VALUES (?, ?, ?, ?, ?)\n            `;\n      const namesString = names.join(', ');\n      const agesString = ages.join(', ');\n      connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], err => {\n        if (err) {\n          console.error('Database error:', err);\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Failed</title>\n                        </head>\n                        <h1>Registration Failed</h1>\n                        <p>There was an issue saving your registration. Please try again later.</p>\n                        <a href=\"/register.html\">Go back</a>\n                    `);\n        }\n\n        //Send email\n        const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\n        sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n\n        // Return a confirmation\n        res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Thank you!</title>\n                    </head>\n                    <h1>Thank you for registering!</h1>\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\n                    <p>Please check your email for a confirmation message from us. If you do not see it in your inbox, please check your spam folder.</p>\n                    <p>There will be a QR Code in your email, please save or screenshot the QR code for admittance into the haunt. </p>\n                    <a href=\"/\">Go back to the home page</a>\n                `);\n      });\n    });\n  });\n});\n\n// Start server\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`Server running on port ${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJteXNxbCIsImNyeXB0byIsIm5vZGVtYWlsZXIiLCJRUkNvZGUiLCJwYXRoIiwiYXBwIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3RhdGljIiwianNvbiIsImNvbm5lY3Rpb24iLCJjcmVhdGVQb29sIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3Rpb25MaW1pdCIsInNldEludGVydmFsIiwicXVlcnkiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJyZXN1bHRzIiwic3RhY2siLCJsb2ciLCJzb2x1dGlvbiIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0Iiwic2VjdXJlIiwiYXV0aCIsInBhc3MiLCJ0bHMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJzZW5kUmVnaXN0cmF0aW9uRW1haWwiLCJlbWFpbCIsInJlZ2lzdHJhdGlvbk51bWJlciIsInRpbWVTbG90IiwibmFtZXMiLCJ2aWV3VXJsIiwicXJDb2RlVVJMIiwiZ2VuZXJhdGVRUkNvZGUiLCJxckNvZGVEYXRhIiwicXJDb2RlQnVmZmVyIiwidG9CdWZmZXIiLCJlbWFpbENvbnRlbnQiLCJqb2luIiwibWFpbE9wdGlvbnMiLCJmcm9tIiwidG8iLCJzdWJqZWN0IiwiaHRtbCIsImF0dGFjaG1lbnRzIiwiZmlsZW5hbWUiLCJjb250ZW50IiwiY2lkIiwic2VuZE1haWwiLCJpbmZvIiwicmVzcG9uc2UiLCJ0b0RhdGFVUkwiLCJhdmFpbGFibGVTbG90cyIsImdlbmVyYXRlUmVnaXN0cmF0aW9uTnVtYmVyIiwibm93IiwiRGF0ZSIsImRheSIsIlN0cmluZyIsImdldERhdGUiLCJwYWRTdGFydCIsIm1vbnRoIiwiZ2V0TW9udGgiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJzbGljZSIsInJhbmRvbUZvdXJEaWdpdHMiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwb3N0IiwicmVxIiwicmVzIiwicmVnaXN0cmF0aW9uX251bWJlciIsImJvZHkiLCJzcWwiLCJsZW5ndGgiLCJzZW5kIiwicmVnaXN0cmF0aW9uIiwibmFtZXNBcnJheSIsInNwbGl0IiwiYWdlc0FycmF5IiwiYWdlcyIsInJlZ2lzdHJhdGlvbkRldGFpbHMiLCJ0aW1lX3Nsb3QiLCJmb3JFYWNoIiwibmFtZSIsImluZGV4Iiwic3FsRmluZCIsImV4aXN0aW5nUmVnaXN0cmFudENvdW50Iiwic3FsRGVsZXRlIiwic3FsVXBkYXRlU3BvdHMiLCJuZXdSZWdpc3RyYW50Q291bnQiLCJkaWZmZXJlbmNlIiwibmFtZXNTdHJpbmciLCJhZ2VzU3RyaW5nIiwic3FsVXBkYXRlIiwiYWRtaW5QYXNzd29yZCIsImNoZWNrQWRtaW5BdXRoIiwibmV4dCIsImhlYWRlcnMiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJlbmNvZGVkIiwiZGVjb2RlZCIsIkJ1ZmZlciIsInRvU3RyaW5nIiwidXNlcm5hbWUiLCJnZXQiLCJzcWxTZWxlY3QiLCJudW1iZXJPZlBlb3BsZSIsInJlZGlyZWN0Iiwic2VuZEZpbGUiLCJfX2Rpcm5hbWUiLCJjaGVja1Nwb3RzU3FsIiwic3BvdHNSZW1haW5pbmciLCJzcG90c19yZW1haW5pbmciLCJ1cGRhdGVTcG90c1NxbCIsIlBPUlQiLCJwcm9jZXNzIiwiZW52IiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiJDOlxcVXNlcnNcXEFuZHJld1xcRG9jdW1lbnRzXFxQcm9qZWN0c1xcSEggMjQnXFxoYXVudGJydW5zd2ljay5jb21cXCIsInNvdXJjZXMiOlsic2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XHJcbmNvbnN0IGJvZHlQYXJzZXIgPSByZXF1aXJlKCdib2R5LXBhcnNlcicpO1xyXG5jb25zdCBteXNxbCA9IHJlcXVpcmUoJ215c3FsMicpO1xyXG5jb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTsgIC8vIEZvciBnZW5lcmF0aW5nIHJlZ2lzdHJhdGlvbiBudW1iZXJzXHJcbmNvbnN0IG5vZGVtYWlsZXIgPSByZXF1aXJlKCdub2RlbWFpbGVyJyk7XHJcbmNvbnN0IFFSQ29kZSA9IHJlcXVpcmUoJ3FyY29kZScpO1xyXG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xyXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XHJcblxyXG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcclxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xyXG5hcHAudXNlKGV4cHJlc3MuanNvbigpKTtcclxuXHJcbi8vIE15U1FMIGNvbm5lY3Rpb24gc2V0dXBcclxuY29uc3QgY29ubmVjdGlvbiA9IG15c3FsLmNyZWF0ZVBvb2woe1xyXG4gICAgaG9zdDogJzEwMC44Ny4xNTAuNzgnLCAgLy8gMTkyLjE2OC4xMDAuMTAwXHJcbiAgICBwb3J0OiAnMzY2NycsXHJcbiAgICB1c2VyOiAndmFsYWsnLFxyXG4gICAgcGFzc3dvcmQ6ICdTTEVFUDR0RycsXHJcbiAgICBkYXRhYmFzZTogJ01ZU1FMX0RBVEFCQVNFJyxcclxuICAgIGNvbm5lY3Rpb25MaW1pdDogMTAgIC8vIEFkanVzdCBhcyBuZWVkZWRcclxufSk7XHJcblxyXG5zZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICBjb25uZWN0aW9uLnF1ZXJ5KCdTRUxFQ1QgMScsIChlcnIpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSBjb25zb2xlLmVycm9yKCdFcnJvciB3aXRoIGtlZXAtYWxpdmUgcXVlcnk6JywgZXJyKTtcclxuICAgIH0pO1xyXG59LCAxMDAwMCk7IC8vIFBpbmcgZXZlcnkgMTAgc2Vjb25kc1xyXG5cclxuY29ubmVjdGlvbi5xdWVyeSgnU0VMRUNUIDEgKyAxIEFTIHNvbHV0aW9uJywgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHF1ZXJ5aW5nIE15U1FMOicsIGVyci5zdGFjayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXN0IHF1ZXJ5IHN1Y2Nlc3NmdWwsIHNvbHV0aW9uOicsIHJlc3VsdHNbMF0uc29sdXRpb24pO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gICAgaG9zdDogJ3NtdHAub2ZmaWNlMzY1LmNvbScsXHJcbiAgICBwb3J0OiA1ODcsXHJcbiAgICBzZWN1cmU6IGZhbHNlLCAvLyBVc2UgVExTXHJcbiAgICBhdXRoOiB7XHJcbiAgICAgICAgdXNlcjogJ2Rvbm90cmVwbHlAaGF1bnRicnVuc3dpY2suY29tJywgLy8gWW91ciBPZmZpY2UgMzY1IGVtYWlsXHJcbiAgICAgICAgcGFzczogJ3ZzandiZGJmaHZxcnZ5cXcnIC8vIFlvdXIgT2ZmaWNlIDM2NSBhcHAgcGFzc3dvcmRcclxuICAgIH0sXHJcbiAgICB0bHM6IHtcclxuICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlIC8vIFRoaXMgbWlnaHQgaGVscCBpZiB0aGVyZSdzIGFuIGlzc3VlIHdpdGggdGhlIGNlcnRpZmljYXRlXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFJlZ2lzdHJhdGlvbkVtYWlsKGVtYWlsLCByZWdpc3RyYXRpb25OdW1iZXIsIHRpbWVTbG90LCBuYW1lcywgdmlld1VybCkge1xyXG4gICAgLy8gR2VuZXJhdGUgdGhlIFFSIGNvZGVcclxuICAgIGNvbnN0IHFyQ29kZVVSTCA9IGF3YWl0IGdlbmVyYXRlUVJDb2RlKHJlZ2lzdHJhdGlvbk51bWJlciwgZW1haWwpO1xyXG4gICAgY29uc3QgcXJDb2RlRGF0YSA9IGAke3JlZ2lzdHJhdGlvbk51bWJlcn06JHtlbWFpbH1gO1xyXG4gICAgY29uc3QgcXJDb2RlQnVmZmVyID0gYXdhaXQgUVJDb2RlLnRvQnVmZmVyKHFyQ29kZURhdGEpO1xyXG4gICAgY29uc29sZS5sb2cocXJDb2RlVVJMKTtcclxuXHJcbiAgICAvLyBFbWFpbCBjb250ZW50IHdpdGggdGhlIGVtYmVkZGVkIFFSIGNvZGVcclxuICAgIGNvbnN0IGVtYWlsQ29udGVudCA9IGBcclxuICAgICAgICA8aDE+VGhhbmsgeW91IGZvciByZWdpc3RlcmluZyE8L2gxPlxyXG4gICAgICAgIDxwPllvdSBoYXZlIHJlZ2lzdGVyZWQgZm9yIHRoZSBmb2xsb3dpbmcgdGltZSBzbG90IG9uIDxzdHJvbmc+U3VuZGF5LCBPY3RvYmVyIDI3dGg8L3N0cm9uZz46PC9wPlxyXG4gICAgICAgIDxwPlRpbWUgU2xvdDogJHt0aW1lU2xvdH08L3A+XHJcbiAgICAgICAgPHA+TmFtZXMgb2YgYXR0ZW5kZWVzOiAke25hbWVzLmpvaW4oJywgJyl9PC9wPlxyXG4gICAgICAgIDxwPllvdSBjYW4gdmlldyB5b3VyIHJlZ2lzdHJhdGlvbiBkZXRhaWxzIGF0IDxhIGhyZWY9XCIke3ZpZXdVcmx9XCI+dGhpcyBsaW5rPC9hPi48L3A+XHJcbiAgICAgICAgPHA+VXNlIHRoZSBRUiBjb2RlIGJlbG93IHdoZW4gY2hlY2tpbmcgaW46PC9wPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiY2lkOnFyQ29kZVwiIGFsdD1cIlFSIENvZGVcIiAvPlxyXG4gICAgYDtcclxuXHJcbiAgICAvLyBVc2UgTm9kZW1haWxlciB0byBzZW5kIHRoZSBlbWFpbCAoeW91IGxpa2VseSBoYXZlIHRoaXMgc2V0dXAgYWxyZWFkeSlcclxuICAgIGNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gICAgICAgIGZyb206ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsXHJcbiAgICAgICAgdG86IGVtYWlsLFxyXG4gICAgICAgIHN1YmplY3Q6ICdZb3VyIEhhdW50ZWQgSG91c2UgUmVnaXN0cmF0aW9uIENvbmZpcm1hdGlvbicsXHJcbiAgICAgICAgaHRtbDogZW1haWxDb250ZW50LFxyXG4gICAgICAgIGF0dGFjaG1lbnRzOiBbe1xyXG4gICAgICAgICAgZmlsZW5hbWU6ICdxcmNvZGUucG5nJyxcclxuICAgICAgICAgIGNvbnRlbnQ6IHFyQ29kZUJ1ZmZlcixcclxuICAgICAgICAgIGNpZDogJ3FyQ29kZScgIC8vIFNhbWUgQ0lEIGFzIGluIHRoZSBlbWFpbCBjb250ZW50XHJcbiAgICAgICAgfV1cclxuICAgIH07XHJcblxyXG4gICAgLy8gU2VuZCB0aGUgZW1haWxcclxuICAgIHRyYW5zcG9ydGVyLnNlbmRNYWlsKG1haWxPcHRpb25zLCAoZXJyb3IsIGluZm8pID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VtYWlsIHNlbnQ6ICcgKyBpbmZvLnJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVRUkNvZGUocmVnaXN0cmF0aW9uTnVtYmVyLCBlbWFpbCkge1xyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBxckNvZGVEYXRhID0gYCR7cmVnaXN0cmF0aW9uTnVtYmVyfToke2VtYWlsfWA7IC8vIFRoZSBkYXRhIHlvdSB3YW50IHRvIGVuY29kZSBpbiB0aGUgUVIgY29kZVxyXG4gICAgY29uc3QgcXJDb2RlVVJMID0gYXdhaXQgUVJDb2RlLnRvRGF0YVVSTChxckNvZGVEYXRhKTsgLy8gR2VuZXJhdGVzIGEgYmFzZTY0IGltYWdlIFVSTFxyXG4gICAgcmV0dXJuIHFyQ29kZVVSTDtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBnZW5lcmF0ZSBRUiBDb2RlJywgZXJyKTtcclxuICAgIHRocm93IGVycjtcclxuICB9XHJcbn1cclxuXHJcbi8vIEluLW1lbW9yeSBzdG9yYWdlIG9mIGF2YWlsYWJsZSBzcG90cyAodGhpcyBjb3VsZCBhbHNvIGJlIGluIHRoZSBkYXRhYmFzZSlcclxubGV0IGF2YWlsYWJsZVNsb3RzID0ge1xyXG4gICAgJzY6MDAgUE0nOiAyMCxcclxuICAgICc2OjE1IFBNJzogMjAsXHJcbiAgICAnNjozMCBQTSc6IDIwLFxyXG4gICAgJzY6NDUgUE0nOiAyMCxcclxuICAgICc3OjAwIFBNJzogMjAsXHJcbiAgICAnNzoxNSBQTSc6IDIwLFxyXG4gICAgJzc6MzAgUE0nOiAyMCxcclxuICAgICc3OjQ1IFBNJzogMjAsXHJcbiAgICAnODowMCBQTSc6IDIwLFxyXG4gICAgJzg6MTUgUE0nOiAyMCxcclxuICAgICc4OjMwIFBNJzogMjAsXHJcbiAgICAnODo0NSBQTSc6IDIwXHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZW5lcmF0ZVJlZ2lzdHJhdGlvbk51bWJlcigpIHtcclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCBkYXkgPSBTdHJpbmcobm93LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTsgICAgICAvLyBERFxyXG4gICAgY29uc3QgbW9udGggPSBTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpOyAvLyBNTVxyXG4gICAgY29uc3QgeWVhciA9IFN0cmluZyhub3cuZ2V0RnVsbFllYXIoKSkuc2xpY2UoLTIpOyAgICAgICAgLy8gWVlcclxuICAgIGNvbnN0IHJhbmRvbUZvdXJEaWdpdHMgPSBNYXRoLmZsb29yKDEwMDAgKyBNYXRoLnJhbmRvbSgpICogOTAwMCk7XHJcbiAgICByZXR1cm4gYExDLSR7ZGF5fSR7bW9udGh9JHt5ZWFyfS0ke3JhbmRvbUZvdXJEaWdpdHN9YDtcclxufVxyXG5cclxuLy9WaWV3IHJlZ2lzdHJhdGlvblxyXG5hcHAucG9zdCgnL3ZpZXctcmVnaXN0cmF0aW9uJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBRdWVyeSB0byBmaW5kIHRoZSByZWdpc3RyYXRpb24gYmFzZWQgb24gcmVnaXN0cmF0aW9uIG51bWJlciBhbmQgZW1haWxcclxuICAgIGNvbnN0IHNxbCA9ICdTRUxFQ1QgKiBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8gQU5EIGVtYWlsID0gPyc7XHJcbiAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbCwgW3JlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+Tm8gUmVnaXN0cmF0aW9uIEZvdW5kPC90aXRsZT5cclxuICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgIDxoMT5ObyBSZWdpc3RyYXRpb24gRm91bmQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgPHA+V2UgY291bGRuJ3QgZmluZCBhIHJlZ2lzdHJhdGlvbiB3aXRoIHRoYXQgbnVtYmVyIGFuZCBlbWFpbC48L3A+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3ZpZXcuaHRtbFwiPlRyeSBhZ2FpbjwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSByZXN1bHRzWzBdO1xyXG4gICAgICAgIGNvbnN0IG5hbWVzQXJyYXkgPSByZWdpc3RyYXRpb24ubmFtZXMuc3BsaXQoJywgJyk7XHJcbiAgICAgICAgY29uc3QgYWdlc0FycmF5ID0gcmVnaXN0cmF0aW9uLmFnZXMuc3BsaXQoJywgJyk7XHJcblxyXG4gICAgICAgIGxldCByZWdpc3RyYXRpb25EZXRhaWxzID0gYFxyXG4gICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgIDx0aXRsZT5Nb2RpZnkgUmVnaXN0cmF0aW9uPC90aXRsZT5cclxuICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICA8aDI+UmVnaXN0cmF0aW9uIERldGFpbHM8L2gyPlxyXG4gICAgICAgICAgICA8cD5SZWdpc3RyYXRpb24gTnVtYmVyOiAke3JlZ2lzdHJhdGlvbi5yZWdpc3RyYXRpb25fbnVtYmVyfTwvcD5cclxuICAgICAgICAgICAgPHA+RW1haWw6ICR7cmVnaXN0cmF0aW9uLmVtYWlsfTwvcD5cclxuICAgICAgICAgICAgPHA+VGltZSBTbG90OiAke3JlZ2lzdHJhdGlvbi50aW1lX3Nsb3R9PC9wPlxyXG4gICAgICAgICAgICA8Zm9ybSBpZD1cIm1vZGlmeS1mb3JtXCIgYWN0aW9uPVwiL21vZGlmeS1yZWdpc3RyYXRpb25cIiBtZXRob2Q9XCJQT1NUXCI+XHJcbiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJyZWdpc3RyYXRpb25fbnVtYmVyXCIgdmFsdWU9XCIke3JlZ2lzdHJhdGlvbi5yZWdpc3RyYXRpb25fbnVtYmVyfVwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiZW1haWxcIiB2YWx1ZT1cIiR7cmVnaXN0cmF0aW9uLmVtYWlsfVwiPlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIC8vIEdlbmVyYXRlIGF0dGVuZGVlIGZpZWxkcyBmb3IgbW9kaWZpY2F0aW9uXHJcbiAgICAgICAgbmFtZXNBcnJheS5mb3JFYWNoKChuYW1lLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZWdpc3RyYXRpb25EZXRhaWxzICs9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJhdHRlbmRlZVwiIGlkPVwiYXR0ZW5kZWUtJHtpbmRleCArIDF9XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIm5hbWUke2luZGV4ICsgMX1cIj5OYW1lOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCJuYW1lJHtpbmRleCArIDF9XCIgbmFtZT1cIm5hbWVzW11cIiB2YWx1ZT1cIiR7bmFtZX1cIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiYWdlJHtpbmRleCArIDF9XCI+QWdlOjwvbGFiZWw+XHJcbiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdCBpZD1cImFnZSR7aW5kZXggKyAxfVwiIG5hbWU9XCJhZ2VzW11cIiByZXF1aXJlZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjE2LTIwXCIgJHthZ2VzQXJyYXlbaW5kZXhdID09PSAnMTYtMjAnID8gJ3NlbGVjdGVkJyA6ICcnfT4xNi0yMDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMjErXCIgJHthZ2VzQXJyYXlbaW5kZXhdID09PSAnMjErJyA/ICdzZWxlY3RlZCcgOiAnJ30+MjErPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+XHJcbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJyZW1vdmVcIiBvbmNsaWNrPVwicmVtb3ZlQXR0ZW5kZWUoJHtpbmRleCArIDF9KVwiPlJlbW92ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBcIlJlbW92ZSBBbGxcIiBidXR0b24gYW5kIHN1Ym1pdCBidXR0b25cclxuICAgICAgICByZWdpc3RyYXRpb25EZXRhaWxzICs9IGBcclxuICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIG9uY2xpY2s9XCJjb25maXJtUmVtb3ZlQWxsKClcIj5SZW1vdmUgQWxsPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnV0dG9uXCIgdHlwZT1cInN1Ym1pdFwiPlN1Ym1pdCBDaGFuZ2VzPC9idXR0b24+XHJcbiAgICAgICAgICAgIDwvZm9ybT5cclxuXHJcbiAgICAgICAgICAgIDxzY3JpcHQ+XHJcbiAgICAgICAgICAgICAgICAvLyBGdW5jdGlvbiB0byByZW1vdmUgaW5kaXZpZHVhbCBhdHRlbmRlZXNcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZUF0dGVuZGVlKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0ZW5kZWVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F0dGVuZGVlLScgKyBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0ZW5kZWVFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNvbmZpcm0gcmVtb3ZpbmcgYWxsIGF0dGVuZGVlc1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY29uZmlybVJlbW92ZUFsbCgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRlbmRlZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmF0dGVuZGVlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRlbmRlZUVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIk5vIHJlZ2lzdHJhbnRzIHRvIHJlbW92ZS5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpcm1lZCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVtb3ZlIGFsbCByZWdpc3RyYW50cz9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZUVsZW1lbnRzLmZvckVhY2goYXR0ZW5kZWUgPT4gYXR0ZW5kZWUucmVtb3ZlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHRoZSByZWdpc3RyYXRpb24gZGV0YWlscyB0byB0aGUgdXNlclxyXG4gICAgICAgIHJlcy5zZW5kKHJlZ2lzdHJhdGlvbkRldGFpbHMpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9tb2RpZnktcmVnaXN0cmF0aW9uJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCB7IHJlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsLCBuYW1lcywgYWdlcyB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gUXVlcnkgdG8gZmluZCB0aGUgZXhpc3RpbmcgcmVnaXN0cmF0aW9uIGJlZm9yZSBtYWtpbmcgY2hhbmdlc1xyXG4gICAgY29uc3Qgc3FsRmluZCA9ICdTRUxFQ1QgKiBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8gQU5EIGVtYWlsID0gPyc7XHJcbiAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbEZpbmQsIFtyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIsIHJlc3VsdHMpID0+IHtcclxuICAgICAgICBpZiAoZXJyIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPk5vIFJlZ2lzdHJhdGlvbiBGb3VuZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+Tm8gUmVnaXN0cmF0aW9uIEZvdW5kPC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPldlIGNvdWxkbid0IGZpbmQgYSByZWdpc3RyYXRpb24gd2l0aCB0aGF0IG51bWJlciBhbmQgZW1haWwuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5UcnkgYWdhaW48L2E+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gcmVzdWx0c1swXTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCA9IHJlZ2lzdHJhdGlvbi5uYW1lcyA/IHJlZ2lzdHJhdGlvbi5uYW1lcy5zcGxpdCgnLCAnKS5sZW5ndGggOiAwO1xyXG5cclxuICAgICAgICAvLyBJZiAnbmFtZXMnIGFycmF5IGlzIHVuZGVmaW5lZCBvciBlbXB0eSwgZGVsZXRlIHRoZSByZWdpc3RyYXRpb24gYW5kIGFkZCBzcG90cyBiYWNrIHRvIHRoZSB0aW1lIHNsb3RcclxuICAgICAgICBpZiAoIW5hbWVzIHx8IG5hbWVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBzcWxEZWxldGUgPSAnREVMRVRFIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/JztcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxEZWxldGUsIFtyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZW1vdmFsIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkVycm9yPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+VGhlcmUgd2FzIGFuIGlzc3VlIHJlbW92aW5nIHlvdXIgcmVnaXN0cmF0aW9uLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5HbyBiYWNrPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEFkZCBiYWNrIGFsbCBzcG90cyB3aGVuIHJlZ2lzdHJhdGlvbiBpcyByZW1vdmVkXHJcbiAgICAgICAgICAgICAgICBjb25zdCBzcWxVcGRhdGVTcG90cyA9ICdVUERBVEUgdGltZV9zbG90cyBTRVQgc3BvdHNfcmVtYWluaW5nID0gc3BvdHNfcmVtYWluaW5nICsgPyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVXBkYXRlU3BvdHMsIFtleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCwgcmVnaXN0cmF0aW9uLnRpbWVfc2xvdF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkVycm9yIFVwZGF0aW5nPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5FcnJvciBVcGRhdGluZyBTcG90czwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgdXBkYXRpbmcgdGhlIGF2YWlsYWJsZSBzcG90cyBmb3IgdGhlIHRpbWUgc2xvdC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL1wiPkdvIGJhY2sgdG8gdGhlIGhvbWUgcGFnZTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBSZW1vdmVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFJlbW92ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmVtb3ZlZC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGlmZmVyZW5jZSBpbiByZWdpc3RyYW50IGNvdW50IChpZiBhbnkgcmVnaXN0cmFudHMgd2VyZSBhZGRlZCBvciByZW1vdmVkKVxyXG4gICAgICAgICAgICBjb25zdCBuZXdSZWdpc3RyYW50Q291bnQgPSBuYW1lcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBleGlzdGluZ1JlZ2lzdHJhbnRDb3VudCAtIG5ld1JlZ2lzdHJhbnRDb3VudDtcclxuXHJcbiAgICAgICAgICAgIC8vIFNhZmVndWFyZCBmb3IgdW5kZWZpbmVkIG5hbWVzIG9yIGFnZXMgd2hlbiBqb2luaW5nXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzU3RyaW5nID0gbmFtZXMgJiYgbmFtZXMubGVuZ3RoID8gbmFtZXMuam9pbignLCAnKSA6ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2VzU3RyaW5nID0gYWdlcyAmJiBhZ2VzLmxlbmd0aCA/IGFnZXMuam9pbignLCAnKSA6ICcnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3FsVXBkYXRlID0gYFxyXG4gICAgICAgICAgICAgICAgVVBEQVRFIHJlZ2lzdHJhdGlvbnNcclxuICAgICAgICAgICAgICAgIFNFVCBuYW1lcyA9ID8sIGFnZXMgPSA/XHJcbiAgICAgICAgICAgICAgICBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/XHJcbiAgICAgICAgICAgIGA7XHJcblxyXG4gICAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbFVwZGF0ZSwgW25hbWVzU3RyaW5nLCBhZ2VzU3RyaW5nLCByZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5VcGRhdGUgRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+VXBkYXRlIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSB1cGRhdGluZyB5b3VyIHJlZ2lzdHJhdGlvbi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvdmlldy5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc3BvdHMgcmVtYWluaW5nIGJhc2VkIG9uIHRoZSBkaWZmZXJlbmNlIGluIHJlZ2lzdHJhbnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoZGlmZmVyZW5jZSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNxbFVwZGF0ZVNwb3RzID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgKyA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVXBkYXRlU3BvdHMsIFtkaWZmZXJlbmNlLCByZWdpc3RyYXRpb24udGltZV9zbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5VcGRhdGUgRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkVycm9yIFVwZGF0aW5nIFNwb3RzPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgdXBkYXRpbmcgdGhlIGF2YWlsYWJsZSBzcG90cyBmb3IgdGhlIHRpbWUgc2xvdC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gVXBkYXRlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFVwZGF0ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+WW91ciByZWdpc3RyYXRpb24gaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBVcGRhdGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIFVwZGF0ZWQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgdXBkYXRlZC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vL0FETUlOIHBhZ2VcclxuY29uc3QgYWRtaW5QYXNzd29yZCA9ICdTTEVFUDR0Ryc7ICAvLyBSZXBsYWNlIHdpdGggeW91ciBhY3R1YWwgcGFzc3dvcmRcclxuXHJcbi8vIE1pZGRsZXdhcmUgdG8gcHJvdGVjdCB0aGUgYWRtaW4gcm91dGVcclxuZnVuY3Rpb24gY2hlY2tBZG1pbkF1dGgocmVxLCByZXMsIG5leHQpIHtcclxuICAgIGNvbnN0IGF1dGggPSByZXEuaGVhZGVyc1snYXV0aG9yaXphdGlvbiddO1xyXG5cclxuICAgIGlmICghYXV0aCkge1xyXG4gICAgICAgIHJlcy5zZXRIZWFkZXIoJ1dXVy1BdXRoZW50aWNhdGUnLCAnQmFzaWMgcmVhbG09XCJBZG1pbiBBcmVhXCInKTtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGVuY29kZWQgPSBhdXRoLnNwbGl0KCcgJylbMV07XHJcbiAgICBjb25zdCBkZWNvZGVkID0gQnVmZmVyLmZyb20oZW5jb2RlZCwgJ2Jhc2U2NCcpLnRvU3RyaW5nKCd1dGYtOCcpO1xyXG4gICAgY29uc3QgW3VzZXJuYW1lLCBwYXNzd29yZF0gPSBkZWNvZGVkLnNwbGl0KCc6Jyk7XHJcblxyXG4gICAgaWYgKHVzZXJuYW1lID09PSAnYWRtaW4nICYmIHBhc3N3b3JkID09PSBhZG1pblBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXMuc2V0SGVhZGVyKCdXV1ctQXV0aGVudGljYXRlJywgJ0Jhc2ljIHJlYWxtPVwiQWRtaW4gQXJlYVwiJyk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoJ0F1dGhlbnRpY2F0aW9uIGZhaWxlZC4nKTtcclxufVxyXG5cclxuYXBwLmdldCgnL2FkbWluJywgY2hlY2tBZG1pbkF1dGgsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3Qgc3FsID0gJ1NFTEVDVCAqIEZST00gcmVnaXN0cmF0aW9ucyBPUkRFUiBCWSB0aW1lX3Nsb3QnO1xyXG5cclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ0Vycm9yIHJldHJpZXZpbmcgcmVnaXN0cmF0aW9ucy4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBIVE1MIHRhYmxlIGZvciB0aGUgcmVnaXN0cmF0aW9uc1xyXG4gICAgICAgIGxldCBodG1sID0gYFxyXG4gICAgICAgICAgICA8aDE+QWRtaW46IFZpZXcgUmVnaXN0cmF0aW9uczwvaDE+XHJcbiAgICAgICAgICAgIDx0YWJsZSBib3JkZXI9XCIxXCI+XHJcbiAgICAgICAgICAgICAgICA8dHI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlJlZ2lzdHJhdGlvbiBOdW1iZXI8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5FbWFpbDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPlRpbWUgU2xvdDwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPk5hbWVzPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+QWdlczwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPkFjdGlvbjwvdGg+XHJcbiAgICAgICAgICAgICAgICA8L3RyPlxyXG4gICAgICAgICAgICAgICAgPHA+VjAuNS41PC9wPlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIHJlc3VsdHMuZm9yRWFjaChyZWdpc3RyYXRpb24gPT4ge1xyXG4gICAgICAgICAgICBodG1sICs9IGBcclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24ucmVnaXN0cmF0aW9uX251bWJlcn08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi5lbWFpbH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi50aW1lX3Nsb3R9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24ubmFtZXN9PC90ZD5cclxuICAgICAgICAgICAgICAgICAgICA8dGQ+JHtyZWdpc3RyYXRpb24uYWdlc308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGZvcm0gYWN0aW9uPVwiL2FkbWluL2RlbGV0ZVwiIG1ldGhvZD1cIlBPU1RcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cInJlZ2lzdHJhdGlvbl9udW1iZXJcIiB2YWx1ZT1cIiR7cmVnaXN0cmF0aW9uLnJlZ2lzdHJhdGlvbl9udW1iZXJ9XCIgLz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiPlJlbW92ZTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Zvcm0+XHJcbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGh0bWwgKz0gJzwvdGFibGU+JztcclxuICAgICAgICByZXMuc2VuZChodG1sKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvcmVnaXN0ZXInLCBhc3luYyAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgZW1haWwsIHJlZ2lzdHJhdGlvbk51bWJlciwgdGltZVNsb3QsIG5hbWVzLCB2aWV3VXJsIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHNlbmRSZWdpc3RyYXRpb25FbWFpbChlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwpO1xyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdSZWdpc3RyYXRpb24gc3VjY2Vzc2Z1bCwgZW1haWwgc2VudC4nKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLCBidXQgZW1haWwgZmFpbGVkLicpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbmFwcC5wb3N0KCcvYWRtaW4vZGVsZXRlJywgY2hlY2tBZG1pbkF1dGgsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgcmVnaXN0cmF0aW9uTnVtYmVyID0gcmVxLmJvZHkucmVnaXN0cmF0aW9uX251bWJlcjtcclxuXHJcbiAgICAvLyBSZXRyaWV2ZSB0aGUgcmVnaXN0cmF0aW9uIGRldGFpbHNcclxuICAgIGNvbnN0IHNxbFNlbGVjdCA9ICdTRUxFQ1QgKiBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8nO1xyXG5cclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsU2VsZWN0LCBbcmVnaXN0cmF0aW9uTnVtYmVyXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKCdFcnJvciBmaW5kaW5nIHRoZSByZWdpc3RyYXRpb24uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSByZXN1bHRzWzBdO1xyXG4gICAgICAgIGNvbnN0IG51bWJlck9mUGVvcGxlID0gcmVnaXN0cmF0aW9uLm5hbWVzLnNwbGl0KCcsICcpLmxlbmd0aDsgIC8vIFNwbGl0IGJ5IGNvbW1hIHRvIGNvdW50IG5hbWVzXHJcblxyXG4gICAgICAgIC8vIERlbGV0ZSB0aGUgcmVnaXN0cmF0aW9uIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgY29uc3Qgc3FsRGVsZXRlID0gJ0RFTEVURSBGUk9NIHJlZ2lzdHJhdGlvbnMgV0hFUkUgcmVnaXN0cmF0aW9uX251bWJlciA9ID8nO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsRGVsZXRlLCBbcmVnaXN0cmF0aW9uTnVtYmVyXSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ0Vycm9yIGRlbGV0aW5nIHRoZSByZWdpc3RyYXRpb24uJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBiYWNrIHRoZSBudW1iZXIgb2Ygc3BvdHMgdG8gdGhlIHRpbWUgc2xvdFxyXG4gICAgICAgICAgICBjb25zdCBzcWxVcGRhdGVTcG90cyA9ICdVUERBVEUgdGltZV9zbG90cyBTRVQgc3BvdHNfcmVtYWluaW5nID0gc3BvdHNfcmVtYWluaW5nICsgPyBXSEVSRSB0aW1lX3Nsb3QgPSA/JztcclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxVcGRhdGVTcG90cywgW251bWJlck9mUGVvcGxlLCByZWdpc3RyYXRpb24udGltZV9zbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCgnRXJyb3IgdXBkYXRpbmcgc3BvdHMuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVzLnJlZGlyZWN0KCcvYWRtaW4nKTsgIC8vIFJlZnJlc2ggdGhlIGFkbWluIHBhZ2UgYWZ0ZXIgZGVsZXRpb25cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBTZXJ2ZSB0aGUgbGFuZGluZyBhbmQgcmVnaXN0cmF0aW9uIHBhZ2VzXHJcbmFwcC5nZXQoJy8nLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZW5kRmlsZShfX2Rpcm5hbWUgKyAnL3B1YmxpYy9pbmRleC5odG1sJyk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL3JlZ2lzdGVyLmh0bWwnLCAocmVxLCByZXMpID0+IHtcclxuICAgIHJlcy5zZW5kRmlsZShfX2Rpcm5hbWUgKyAnL3B1YmxpYy9yZWdpc3Rlci5odG1sJyk7XHJcbn0pO1xyXG5cclxuYXBwLmdldCgnL2Zvcm10ZXN0JywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICByZXMuc2VuZEZpbGUoX19kaXJuYW1lICsgJy9wdWJsaWMvZm9ybXRlc3QuaHRtbCcpO1xyXG59KTtcclxuXHJcbmFwcC5nZXQoJy9mYXEnLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2VuZEZpbGUoX19kaXJuYW1lICsgJy9wdWJsaWMvZmFxLmh0bWwnKTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvd2hhdC10by1leHBlY3QnLCAocmVxLCByZXMpID0+IHtcclxuICByZXMuc2VuZEZpbGUoX19kaXJuYW1lICsgJy9wdWJsaWMvd3RlLmh0bWwnKTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvc3BvdHMnLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNxbCA9ICdTRUxFQ1QgdGltZV9zbG90LCBzcG90c19yZW1haW5pbmcgRlJPTSB0aW1lX3Nsb3RzJztcclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIGZldGNoaW5nIGF2YWlsYWJsZSBzcG90cycgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5qc29uKHJlc3VsdHMpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gSGFuZGxlIGZvcm0gc3VibWlzc2lvblxyXG5hcHAucG9zdCgnL3N1Ym1pdCcsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB0aW1lU2xvdCwgZW1haWwsIG5hbWVzLCBhZ2VzIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbk51bWJlciA9IGdlbmVyYXRlUmVnaXN0cmF0aW9uTnVtYmVyKCk7XHJcblxyXG4gICAgLy8gU3RlcCAxOiBDaGVjayB0aGUgcmVtYWluaW5nIHNwb3RzIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICBjb25zdCBjaGVja1Nwb3RzU3FsID0gJ1NFTEVDVCBzcG90c19yZW1haW5pbmcgRlJPTSB0aW1lX3Nsb3RzIFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgY29ubmVjdGlvbi5xdWVyeShjaGVja1Nwb3RzU3FsLCBbdGltZVNsb3RdLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVyciB8fCByZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzcG90czonLCBlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gRmFpbGVkPC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPkNvdWxkIG5vdCByZXRyaWV2ZSBhdmFpbGFibGUgc3BvdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcG90c1JlbWFpbmluZyA9IHJlc3VsdHNbMF0uc3BvdHNfcmVtYWluaW5nO1xyXG5cclxuICAgICAgICAvLyBTdGVwIDI6IENoZWNrIGlmIHRoZXJlIGFyZSBlbm91Z2ggc3BvdHNcclxuICAgICAgICBpZiAoc3BvdHNSZW1haW5pbmcgPCBuYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICA8cD5Tb3JyeSwgdGhlcmUgYXJlbid0IGVub3VnaCBzcG90cyBsZWZ0IGZvciB0aGUgc2VsZWN0ZWQgdGltZSBzbG90ICgke3RpbWVTbG90fSkuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjayBhbmQgdHJ5IGFub3RoZXIgc2xvdDwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdGVwIDM6IERlZHVjdCB0aGUgbnVtYmVyIG9mIHJlZ2lzdGVyZWQgcGVvcGxlIGZyb20gdGhlIGF2YWlsYWJsZSBzcG90c1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVNwb3RzU3FsID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgLSA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkodXBkYXRlU3BvdHNTcWwsIFtuYW1lcy5sZW5ndGgsIHRpbWVTbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzcG90czonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gRmFpbGVkPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8cD5Db3VsZCBub3QgdXBkYXRlIGF2YWlsYWJsZSBzcG90cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdGVwIDQ6IFNhdmUgcmVnaXN0cmF0aW9uIHRvIHRoZSBNeVNRTCBkYXRhYmFzZVxyXG4gICAgICAgICAgICBjb25zdCBzcWwgPSBgXHJcbiAgICAgICAgICAgICAgICBJTlNFUlQgSU5UTyByZWdpc3RyYXRpb25zIChyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbCwgdGltZV9zbG90LCBuYW1lcywgYWdlcylcclxuICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgY29uc3QgbmFtZXNTdHJpbmcgPSBuYW1lcy5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2VzU3RyaW5nID0gYWdlcy5qb2luKCcsICcpO1xyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIFtyZWdpc3RyYXRpb25OdW1iZXIsIGVtYWlsLCB0aW1lU2xvdCwgbmFtZXNTdHJpbmcsIGFnZXNTdHJpbmddLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSBzYXZpbmcgeW91ciByZWdpc3RyYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3JlZ2lzdGVyLmh0bWxcIj5HbyBiYWNrPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vU2VuZCBlbWFpbFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1VybCA9IGBodHRwczovL3lvdXItZG9tYWluLmNvbS92aWV3LXJlZ2lzdHJhdGlvbj9udW1iZXI9JHtyZWdpc3RyYXRpb25OdW1iZXJ9YDtcclxuICAgICAgICAgICAgICAgIHNlbmRSZWdpc3RyYXRpb25FbWFpbChlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBhIGNvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5UaGFuayB5b3UhPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxPlRoYW5rIHlvdSBmb3IgcmVnaXN0ZXJpbmchPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8cD5Zb3UgaGF2ZSByZWdpc3RlcmVkICR7bmFtZXMubGVuZ3RofSBwZXJzb24ocykgZm9yIHRoZSAke3RpbWVTbG90fSB0aW1lIHNsb3QuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPllvdXIgcmVnaXN0cmF0aW9uIG51bWJlciBpcyA8c3Ryb25nPiR7cmVnaXN0cmF0aW9uTnVtYmVyfTwvc3Ryb25nPi4gUGxlYXNlIGtlZXAgdGhpcyBudW1iZXIgZm9yIGZ1dHVyZSByZWZlcmVuY2UuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPlBsZWFzZSBjaGVjayB5b3VyIGVtYWlsIGZvciBhIGNvbmZpcm1hdGlvbiBtZXNzYWdlIGZyb20gdXMuIElmIHlvdSBkbyBub3Qgc2VlIGl0IGluIHlvdXIgaW5ib3gsIHBsZWFzZSBjaGVjayB5b3VyIHNwYW0gZm9sZGVyLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3aWxsIGJlIGEgUVIgQ29kZSBpbiB5b3VyIGVtYWlsLCBwbGVhc2Ugc2F2ZSBvciBzY3JlZW5zaG90IHRoZSBRUiBjb2RlIGZvciBhZG1pdHRhbmNlIGludG8gdGhlIGhhdW50LiA8L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyBTdGFydCBzZXJ2ZXJcclxuY29uc3QgUE9SVCA9IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMDtcclxuYXBwLmxpc3RlbihQT1JULCAoKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhgU2VydmVyIHJ1bm5pbmcgb24gcG9ydCAke1BPUlR9YCk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLFVBQVUsR0FBR0QsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN6QyxNQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDL0IsTUFBTUcsTUFBTSxHQUFHSCxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBRTtBQUNuQyxNQUFNSSxVQUFVLEdBQUdK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","map":{"version":3,"names":["express","require","bodyParser","mysql","crypto","nodemailer","QRCode","path","app","use","urlencoded","extended","static","json","connection","createPool","host","port","user","password","database","connectionLimit","setInterval","query","err","console","error","results","stack","log","solution","transporter","createTransport","secure","auth","pass","tls","rejectUnauthorized","sendRegistrationEmail","email","registrationNumber","timeSlot","names","viewUrl","qrCodeURL","generateQRCode","qrCodeData","qrCodeBuffer","toBuffer","emailContent","join","mailOptions","from","to","subject","html","attachments","filename","content","cid","sendMail","info","response","toDataURL","availableSlots","generateRegistrationNumber","now","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","slice","randomFourDigits","Math","floor","random","post","req","res","registration_number","body","sql","length","send","registration","namesArray","split","agesArray","ages","registrationDetails","time_slot","forEach","name","index","sqlFind","existingRegistrantCount","sqlDelete","sqlUpdateSpots","newRegistrantCount","difference","namesString","agesString","sqlUpdate","adminPassword","checkAdminAuth","next","headers","setHeader","status","encoded","decoded","Buffer","toString","username","get","sqlSelect","numberOfPeople","redirect","sendFile","__dirname","checkSpotsSql","spotsRemaining","spots_remaining","updateSpotsSql","PORT","process","env","listen"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst mysql = require('mysql2');\r\nconst crypto = require('crypto');  // For generating registration numbers\r\nconst nodemailer = require('nodemailer');\r\nconst QRCode = require('qrcode');\r\nconst path = require('path');\r\nconst app = express();\r\n\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(express.static('public'));\r\napp.use(express.json());\r\n\r\n// MySQL connection setup\r\nconst connection = mysql.createPool({\r\n    host: '100.87.150.78',  // 192.168.100.100\r\n    port: '3667',\r\n    user: 'valak',\r\n    password: 'SLEEP4tG',\r\n    database: 'MYSQL_DATABASE',\r\n    connectionLimit: 10  // Adjust as needed\r\n});\r\n\r\nsetInterval(() => {\r\n    connection.query('SELECT 1', (err) => {\r\n        if (err) console.error('Error with keep-alive query:', err);\r\n    });\r\n}, 10000); // Ping every 10 seconds\r\n\r\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\r\n    if (err) {\r\n        console.error('Error querying MySQL:', err.stack);\r\n    } else {\r\n        console.log('Test query successful, solution:', results[0].solution);\r\n    }\r\n});\r\n\r\nconst transporter = nodemailer.createTransport({\r\n    host: 'smtp.office365.com',\r\n    port: 587,\r\n    secure: false, // Use TLS\r\n    auth: {\r\n        user: 'donotreply@hauntbrunswick.com', // Your Office 365 email\r\n        pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\r\n    },\r\n    tls: {\r\n        rejectUnauthorized: false // This might help if there's an issue with the certificate\r\n    }\r\n});\r\n\r\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\r\n    // Generate the QR code\r\n    const qrCodeURL = await generateQRCode(registrationNumber, email);\r\n    const qrCodeData = `${registrationNumber}:${email}`;\r\n    const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\r\n    console.log(qrCodeURL);\r\n\r\n    // Email content with the embedded QR code\r\n    const emailContent = `\r\n        <h1>Thank you for registering!</h1>\r\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\r\n        <p>Time Slot: ${timeSlot}</p>\r\n        <p>Names of attendees: ${names.join(', ')}</p>\r\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\r\n        <p>Use the QR code below when checking in:</p>\r\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\r\n    `;\r\n\r\n    // Use Nodemailer to send the email (you likely have this setup already)\r\n    const mailOptions = {\r\n        from: 'donotreply@hauntbrunswick.com',\r\n        to: email,\r\n        subject: 'Your Haunted House Registration Confirmation',\r\n        html: emailContent,\r\n        attachments: [{\r\n          filename: 'qrcode.png',\r\n          content: qrCodeBuffer,\r\n          cid: 'qrCode'  // Same CID as in the email content\r\n        }]\r\n    };\r\n\r\n    // Send the email\r\n    transporter.sendMail(mailOptions, (error, info) => {\r\n        if (error) {\r\n            console.error('Error sending email:', error);\r\n        } else {\r\n            console.log('Email sent: ' + info.response);\r\n        }\r\n    });\r\n}\r\n\r\nasync function generateQRCode(registrationNumber, email) {\r\n  try {\r\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\r\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\r\n    return qrCodeURL;\r\n  } catch (err) {\r\n    console.error('Failed to generate QR Code', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n// In-memory storage of available spots (this could also be in the database)\r\nlet availableSlots = {\r\n    '6:00 PM': 20,\r\n    '6:15 PM': 20,\r\n    '6:30 PM': 20,\r\n    '6:45 PM': 20,\r\n    '7:00 PM': 20,\r\n    '7:15 PM': 20,\r\n    '7:30 PM': 20,\r\n    '7:45 PM': 20,\r\n    '8:00 PM': 20,\r\n    '8:15 PM': 20,\r\n    '8:30 PM': 20,\r\n    '8:45 PM': 20\r\n};\r\n\r\nfunction generateRegistrationNumber() {\r\n    const now = new Date();\r\n    const day = String(now.getDate()).padStart(2, '0');      // DD\r\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\r\n    const year = String(now.getFullYear()).slice(-2);        // YY\r\n    const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\r\n    return `LC-${day}${month}${year}-${randomFourDigits}`;\r\n}\r\n\r\n//View registration\r\napp.post('/view-registration', (req, res) => {\r\n    const { registration_number, email } = req.body;\r\n\r\n    // Query to find the registration based on registration number and email\r\n    const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sql, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const namesArray = registration.names.split(', ');\r\n        const agesArray = registration.ages.split(', ');\r\n\r\n        let registrationDetails = `\r\n            <head>\r\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                <title>Modify Registration</title>\r\n            </head>\r\n            <h2>Registration Details</h2>\r\n            <p>Registration Number: ${registration.registration_number}</p>\r\n            <p>Email: ${registration.email}</p>\r\n            <p>Time Slot: ${registration.time_slot}</p>\r\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\r\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\r\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\r\n        `;\r\n\r\n        // Generate attendee fields for modification\r\n        namesArray.forEach((name, index) => {\r\n            registrationDetails += `\r\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\r\n                    <label for=\"name${index + 1}\">Name:</label>\r\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\r\n                    <label for=\"age${index + 1}\">Age:</label>\r\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\r\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\r\n                        <option value=\"21+\" ${agesArray[index] === '21+' ? 'selected' : ''}>21+</option>\r\n                    </select>\r\n                    <button type=\"button\" class=\"remove\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\r\n                </div>\r\n            `;\r\n        });\r\n\r\n        // Add \"Remove All\" button and submit button\r\n        registrationDetails += `\r\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\r\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\r\n            </form>\r\n\r\n            <script>\r\n                // Function to remove individual attendees\r\n                function removeAttendee(index) {\r\n                    const attendeeElement = document.getElementById('attendee-' + index);\r\n                    attendeeElement.remove();\r\n                }\r\n\r\n                // Function to confirm removing all attendees\r\n                function confirmRemoveAll() {\r\n                    const attendeeElements = document.querySelectorAll('.attendee');\r\n\r\n                    if (attendeeElements.length === 0) {\r\n                        alert(\"No registrants to remove.\");\r\n                        return;\r\n                    }\r\n\r\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\r\n                    if (confirmed) {\r\n                        attendeeElements.forEach(attendee => attendee.remove());\r\n                    }\r\n                }\r\n            </script>\r\n        `;\r\n\r\n        // Return the registration details to the user\r\n        res.send(registrationDetails);\r\n    });\r\n});\r\n\r\napp.post('/modify-registration', (req, res) => {\r\n    const { registration_number, email, names, ages } = req.body;\r\n\r\n    // Query to find the existing registration before making changes\r\n    const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sqlFind, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\r\n\r\n        // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\r\n        if (!names || names.length === 0) {\r\n            const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\r\n            connection.query(sqlDelete, [registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Removal Failed</title>\r\n                        </head>\r\n                        <h1>Error</h1>\r\n                        <p>There was an issue removing your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Add back all spots when registration is removed\r\n                const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], (err) => {\r\n                    if (err) {\r\n                        return res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Error Updating</title>\r\n                            </head>\r\n                            <h1>Error Updating Spots</h1>\r\n                            <p>There was an issue updating the available spots for the time slot.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    }\r\n\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Removed</title>\r\n                        </head>\r\n                        <h1>Registration Removed</h1>\r\n                        <p>Your registration has been successfully removed.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                });\r\n            });\r\n        } else {\r\n            // Calculate the difference in registrant count (if any registrants were added or removed)\r\n            const newRegistrantCount = names.length;\r\n            const difference = existingRegistrantCount - newRegistrantCount;\r\n\r\n            // Safeguard for undefined names or ages when joining\r\n            const namesString = names && names.length ? names.join(', ') : '';\r\n            const agesString = ages && ages.length ? ages.join(', ') : '';\r\n\r\n            const sqlUpdate = `\r\n                UPDATE registrations\r\n                SET names = ?, ages = ?\r\n                WHERE registration_number = ? AND email = ?\r\n            `;\r\n\r\n            connection.query(sqlUpdate, [namesString, agesString, registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Update Failed</title>\r\n                        </head>\r\n                        <h1>Update Failed</h1>\r\n                        <p>There was an issue updating your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Update spots remaining based on the difference in registrants\r\n                if (difference !== 0) {\r\n                    const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                    connection.query(sqlUpdateSpots, [difference, registration.time_slot], (err) => {\r\n                        if (err) {\r\n                            return res.send(`\r\n                                <head>\r\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                    <title>Update Failed</title>\r\n                                </head>\r\n                                <h1>Error Updating Spots</h1>\r\n                                <p>There was an issue updating the available spots for the time slot.</p>\r\n                                <a href=\"/\">Go back to the home page</a>\r\n                            `);\r\n                        }\r\n\r\n                        res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Registration Updated</title>\r\n                            </head>\r\n                            <h1>Registration Updated</h1>\r\n                            <p>Your registration has been successfully updated.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    });\r\n                } else {\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Updated</title>\r\n                        </head>\r\n                        <h1>Registration Updated</h1>\r\n                        <p>Your registration has been successfully updated.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n//ADMIN page\r\nconst adminPassword = 'SLEEP4tG';  // Replace with your actual password\r\n\r\n// Middleware to protect the admin route\r\nfunction checkAdminAuth(req, res, next) {\r\n    const auth = req.headers['authorization'];\r\n\r\n    if (!auth) {\r\n        res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n        return res.status(401).send('Authentication required.');\r\n    }\r\n\r\n    const encoded = auth.split(' ')[1];\r\n    const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\r\n    const [username, password] = decoded.split(':');\r\n\r\n    if (username === 'admin' && password === adminPassword) {\r\n        return next();\r\n    }\r\n\r\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n    return res.status(401).send('Authentication failed.');\r\n}\r\n\r\napp.get('/admin', checkAdminAuth, (req, res) => {\r\n    const sql = 'SELECT * FROM registrations ORDER BY time_slot';\r\n\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.send('Error retrieving registrations.');\r\n        }\r\n\r\n        // Create HTML table for the registrations\r\n        let html = `\r\n            <h1>Admin: View Registrations</h1>\r\n            <table border=\"1\">\r\n                <tr>\r\n                    <th>Registration Number</th>\r\n                    <th>Email</th>\r\n                    <th>Time Slot</th>\r\n                    <th>Names</th>\r\n                    <th>Ages</th>\r\n                    <th>Action</th>\r\n                </tr>\r\n                <p>V0.5.5</p>\r\n        `;\r\n\r\n        results.forEach(registration => {\r\n            html += `\r\n                <tr>\r\n                    <td>${registration.registration_number}</td>\r\n                    <td>${registration.email}</td>\r\n                    <td>${registration.time_slot}</td>\r\n                    <td>${registration.names}</td>\r\n                    <td>${registration.ages}</td>\r\n                    <td>\r\n                        <form action=\"/admin/delete\" method=\"POST\">\r\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\r\n                            <button type=\"submit\">Remove</button>\r\n                        </form>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        });\r\n\r\n        html += '</table>';\r\n        res.send(html);\r\n    });\r\n});\r\n\r\napp.post('/register', async (req, res) => {\r\n    const { email, registrationNumber, timeSlot, names, viewUrl } = req.body;\r\n\r\n    try {\r\n        await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n        res.status(200).send('Registration successful, email sent.');\r\n    } catch (error) {\r\n        res.status(500).send('Registration successful, but email failed.');\r\n    }\r\n});\r\n\r\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\r\n    const registrationNumber = req.body.registration_number;\r\n\r\n    // Retrieve the registration details\r\n    const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\r\n\r\n    connection.query(sqlSelect, [registrationNumber], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send('Error finding the registration.');\r\n        }\r\n\r\n        const registration = results[0];\r\n        const numberOfPeople = registration.names.split(', ').length;  // Split by comma to count names\r\n\r\n        // Delete the registration from the database\r\n        const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\r\n        connection.query(sqlDelete, [registrationNumber], (err) => {\r\n            if (err) {\r\n                return res.send('Error deleting the registration.');\r\n            }\r\n\r\n            // Add back the number of spots to the time slot\r\n            const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n            connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], (err) => {\r\n                if (err) {\r\n                    return res.send('Error updating spots.');\r\n                }\r\n\r\n                res.redirect('/admin');  // Refresh the admin page after deletion\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Serve the landing and registration pages\r\napp.get('/', (req, res) => {\r\n    res.sendFile(__dirname + '/public/index.html');\r\n});\r\n\r\napp.get('/register.html', (req, res) => {\r\n    res.sendFile(__dirname + '/public/register.html');\r\n});\r\n\r\napp.get('/formtest', (req, res) => {\r\n    res.sendFile(__dirname + '/public/formtest.html');\r\n});\r\n\r\napp.get('/faq', (req, res) => {\r\n  res.sendFile(__dirname + '/public/faq.html');\r\n});\r\n\r\napp.get('/what-to-expect', (req, res) => {\r\n  res.sendFile(__dirname + '/public/wte.html');\r\n});\r\n\r\napp.get('/spots', (req, res) => {\r\n    const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.status(500).json({ error: 'Error fetching available spots' });\r\n        }\r\n        res.json(results);\r\n    });\r\n});\r\n\r\n// Handle form submission\r\napp.post('/submit', (req, res) => {\r\n    const { timeSlot, email, names, ages } = req.body;\r\n    const registrationNumber = generateRegistrationNumber();\r\n\r\n    // Step 1: Check the remaining spots from the database\r\n    const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\r\n    connection.query(checkSpotsSql, [timeSlot], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            console.error('Error checking spots:', err);\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Could not retrieve available spots. Please try again later.</p>\r\n                <a href=\"/register.html\">Go back</a>\r\n            `);\r\n        }\r\n\r\n        const spotsRemaining = results[0].spots_remaining;\r\n\r\n        // Step 2: Check if there are enough spots\r\n        if (spotsRemaining < names.length) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\r\n                <a href=\"/register.html\">Go back and try another slot</a>\r\n            `);\r\n        }\r\n\r\n        // Step 3: Deduct the number of registered people from the available spots\r\n        const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\r\n        connection.query(updateSpotsSql, [names.length, timeSlot], (err) => {\r\n            if (err) {\r\n                console.error('Error updating spots:', err);\r\n                return res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Registration Failed</title>\r\n                    </head>\r\n                    <h1>Registration Failed</h1>\r\n                    <p>Could not update available spots. Please try again later.</p>\r\n                    <a href=\"/register.html\">Go back</a>\r\n                `);\r\n            }\r\n\r\n            // Step 4: Save registration to the MySQL database\r\n            const sql = `\r\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\r\n                VALUES (?, ?, ?, ?, ?)\r\n            `;\r\n            const namesString = names.join(', ');\r\n            const agesString = ages.join(', ');\r\n\r\n            connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], (err) => {\r\n                if (err) {\r\n                    console.error('Database error:', err);\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Failed</title>\r\n                        </head>\r\n                        <h1>Registration Failed</h1>\r\n                        <p>There was an issue saving your registration. Please try again later.</p>\r\n                        <a href=\"/register.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                //Send email\r\n                const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\r\n                sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n\r\n                // Return a confirmation\r\n                res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Thank you!</title>\r\n                    </head>\r\n                    <h1>Thank you for registering!</h1>\r\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\r\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\r\n                    <p>Please check your email for a confirmation message from us. If you do not see it in your inbox, please check your spam folder.</p>\r\n                    <p>There will be a QR Code in your email, please save or screenshot the QR code for admittance into the haunt. </p>\r\n                    <a href=\"/\">Go back to the home page</a>\r\n                `);\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Start server\r\nconst PORT = process.env.PORT || 3000;\r\napp.listen(PORT, () => {\r\n    console.log(`Server running on port ${PORT}`);\r\n});\r\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,UAAU,GAAGD,OAAO,CAAC,aAAa,CAAC;AACzC,MAAME,KAAK,GAAGF,OAAO,CAAC,QAAQ,CAAC;AAC/B,MAAMG,MAAM,GAAGH,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAE;AACnC,MAAMI,UAAU,GAAGJ,OAAO,CAAC,YAAY,CAAC;AACxC,MAAMK,MAAM,GAAGL,OAAO,CAAC,QAAQ,CAAC;AAChC,MAAMM,IAAI,GAAGN,OAAO,CAAC,MAAM,CAAC;AAC5B,MAAMO,GAAG,GAAGR,OAAO,CAAC,CAAC;AAErBQ,GAAG,CAACC,GAAG,CAACP,UAAU,CAACQ,UAAU,CAAC;EAAEC,QAAQ,EAAE;AAAK,CAAC,CAAC,CAAC;AAClDH,GAAG,CAACC,GAAG,CAACT,OAAO,CAACY,MAAM,CAAC,QAAQ,CAAC,CAAC;AACjCJ,GAAG,CAACC,GAAG,CAACT,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC;;AAEvB;AACA,MAAMC,UAAU,GAAGX,KAAK,CAACY,UAAU,CAAC;EAChCC,IAAI,EAAE,eAAe;EAAG;EACxBC,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,OAAO;EACbC,QAAQ,EAAE,UAAU;EACpBC,QAAQ,EAAE,gBAAgB;EAC1BC,eAAe,EAAE,EAAE,CAAE;AACzB,CAAC,CAAC;;AAEFC,WAAW,CAAC,MAAM;EACdR,UAAU,CAACS,KAAK,CAAC,UAAU,EAAGC,GAAG,IAAK;IAClC,IAAIA,GAAG,EAAEC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAAC;EAC/D,CAAC,CAAC;AACN,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;AAEXV,UAAU,CAACS,KAAK,CAAC,0BAA0B,EAAE,CAACC,GAAG,EAAEG,OAAO,KAAK;EAC3D,IAAIH,GAAG,EAAE;IACLC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAACI,KAAK,CAAC;EACrD,CAAC,MAAM;IACHH,OAAO,CAACI,GAAG,CAAC,kCAAkC,EAAEF,OAAO,CAAC,CAAC,CAAC,CAACG,QAAQ,CAAC;EACxE;AACJ,CAAC,CAAC;AAEF,MAAMC,WAAW,GAAG1B,UAAU,CAAC2B,eAAe,CAAC;EAC3ChB,IAAI,EAAE,oBAAoB;EAC1BC,IAAI,EAAE,GAAG;EACTgB,MAAM,EAAE,KAAK;EAAE;EACfC,IAAI,EAAE;IACFhB,IAAI,EAAE,+BAA+B;IAAE;IACvCiB,IAAI,EAAE,kBAAkB,CAAC;EAC7B,CAAC;;EACDC,GAAG,EAAE;IACDC,kBAAkB,EAAE,KAAK,CAAC;EAC9B;AACJ,CAAC,CAAC;;AAEF,eAAeC,qBAAqBA,CAACC,KAAK,EAAEC,kBAAkB,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,OAAO,EAAE;EACtF;EACA,MAAMC,SAAS,GAAG,MAAMC,cAAc,CAACL,kBAAkB,EAAED,KAAK,CAAC;EACjE,MAAMO,UAAU,GAAI,GAAEN,kBAAmB,IAAGD,KAAM,EAAC;EACnD,MAAMQ,YAAY,GAAG,MAAMzC,MAAM,CAAC0C,QAAQ,CAACF,UAAU,CAAC;EACtDrB,OAAO,CAACI,GAAG,CAACe,SAAS,CAAC;;EAEtB;EACA,MAAMK,YAAY,GAAI;AAC1B;AACA;AACA,wBAAwBR,QAAS;AACjC,iCAAiCC,KAAK,CAACQ,IAAI,CAAC,IAAI,CAAE;AAClD,gEAAgEP,OAAQ;AACxE;AACA;AACA,KAAK;;EAED;EACA,MAAMQ,WAAW,GAAG;IAChBC,IAAI,EAAE,+BAA+B;IACrCC,EAAE,EAAEd,KAAK;IACTe,OAAO,EAAE,8CAA8C;IACvDC,IAAI,EAAEN,YAAY;IAClBO,WAAW,EAAE,CAAC;MACZC,QAAQ,EAAE,YAAY;MACtBC,OAAO,EAAEX,YAAY;MACrBY,GAAG,EAAE,QAAQ,CAAE;IACjB,CAAC;EACL,CAAC;;EAED;EACA5B,WAAW,CAAC6B,QAAQ,CAACT,WAAW,EAAE,CAACzB,KAAK,EAAEmC,IAAI,KAAK;IAC/C,IAAInC,KAAK,EAAE;MACPD,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAChD,CAAC,MAAM;MACHD,OAAO,CAACI,GAAG,CAAC,cAAc,GAAGgC,IAAI,CAACC,QAAQ,CAAC;IAC/C;EACJ,CAAC,CAAC;AACN;AAEA,eAAejB,cAAcA,CAACL,kBAAkB,EAAED,KAAK,EAAE;EACvD,IAAI;IACF,MAAMO,UAAU,GAAI,GAAEN,kBAAmB,IAAGD,KAAM,EAAC,CAAC,CAAC;IACrD,MAAMK,SAAS,GAAG,MAAMtC,MAAM,CAACyD,SAAS,CAACjB,UAAU,CAAC,CAAC,CAAC;IACtD,OAAOF,SAAS;EAClB,CAAC,CAAC,OAAOpB,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;IAChD,MAAMA,GAAG;EACX;AACF;;AAEA;AACA,IAAIwC,cAAc,GAAG;EACjB,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE,EAAE;EACb,SAAS,EAAE;AACf,CAAC;AAED,SAASC,0BAA0BA,CAAA,EAAG;EAClC,MAAMC,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB,MAAMC,GAAG,GAAGC,MAAM,CAACH,GAAG,CAACI,OAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAM;EACzD,MAAMC,KAAK,GAAGH,MAAM,CAACH,GAAG,CAACO,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAACF,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;EAC3D,MAAMG,IAAI,GAAGL,MAAM,CAACH,GAAG,CAACS,WAAW,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAQ;EACzD,MAAMC,gBAAgB,GAAGC,IAAI,CAACC,KAAK,CAAC,IAAI,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC;EAChE,OAAQ,MAAKZ,GAAI,GAAEI,KAAM,GAAEE,IAAK,IAAGG,gBAAiB,EAAC;AACzD;;AAEA;AACArE,GAAG,CAACyE,IAAI,CAAC,oBAAoB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzC,MAAM;IAAEC,mBAAmB;IAAE7C;EAAM,CAAC,GAAG2C,GAAG,CAACG,IAAI;;EAE/C;EACA,MAAMC,GAAG,GAAG,yEAAyE;EACrFxE,UAAU,CAACS,KAAK,CAAC+D,GAAG,EAAE,CAACF,mBAAmB,EAAE7C,KAAK,CAAC,EAAE,CAACf,GAAG,EAAEG,OAAO,KAAK;IAClE,IAAIH,GAAG,IAAIG,OAAO,CAAC4D,MAAM,KAAK,CAAC,EAAE;MAC7B,OAAOJ,GAAG,CAACK,IAAI,CAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC;IACN;IAEA,MAAMC,YAAY,GAAG9D,OAAO,CAAC,CAAC,CAAC;IAC/B,MAAM+D,UAAU,GAAGD,YAAY,CAAC/C,KAAK,CAACiD,KAAK,CAAC,IAAI,CAAC;IACjD,MAAMC,SAAS,GAAGH,YAAY,CAACI,IAAI,CAACF,KAAK,CAAC,IAAI,CAAC;IAE/C,IAAIG,mBAAmB,GAAI;AACnC;AACA;AACA;AACA;AACA;AACA,sCAAsCL,YAAY,CAACL,mBAAoB;AACvE,wBAAwBK,YAAY,CAAClD,KAAM;AAC3C,4BAA4BkD,YAAY,CAACM,SAAU;AACnD;AACA,yEAAyEN,YAAY,CAACL,mBAAoB;AAC1G,2DAA2DK,YAAY,CAAClD,KAAM;AAC9E,SAAS;;IAED;IACAmD,UAAU,CAACM,OAAO,CAAC,CAACC,IAAI,EAAEC,KAAK,KAAK;MAChCJ,mBAAmB,IAAK;AACpC,qDAAqDI,KAAK,GAAG,CAAE;AAC/D,sCAAsCA,KAAK,GAAG,CAAE;AAChD,iDAAiDA,KAAK,GAAG,CAAE,2BAA0BD,IAAK;AAC1F,qCAAqCC,KAAK,GAAG,CAAE;AAC/C,qCAAqCA,KAAK,GAAG,CAAE;AAC/C,gDAAgDN,SAAS,CAACM,KAAK,CAAC,KAAK,OAAO,GAAG,UAAU,GAAG,EAAG;AAC/F,8CAA8CN,SAAS,CAACM,KAAK,CAAC,KAAK,KAAK,GAAG,UAAU,GAAG,EAAG;AAC3F;AACA,mFAAmFA,KAAK,GAAG,CAAE;AAC7F;AACA,aAAa;IACL,CAAC,CAAC;;IAEF;IACAJ,mBAAmB,IAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;IAED;IACAX,GAAG,CAACK,IAAI,CAACM,mBAAmB,CAAC;EACjC,CAAC,CAAC;AACN,CAAC,CAAC;AAEFtF,GAAG,CAACyE,IAAI,CAAC,sBAAsB,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC3C,MAAM;IAAEC,mBAAmB;IAAE7C,KAAK;IAAEG,KAAK;IAAEmD;EAAK,CAAC,GAAGX,GAAG,CAACG,IAAI;;EAE5D;EACA,MAAMc,OAAO,GAAG,yEAAyE;EACzFrF,UAAU,CAACS,KAAK,CAAC4E,OAAO,EAAE,CAACf,mBAAmB,EAAE7C,KAAK,CAAC,EAAE,CAACf,GAAG,EAAEG,OAAO,KAAK;IACtE,IAAIH,GAAG,IAAIG,OAAO,CAAC4D,MAAM,KAAK,CAAC,EAAE;MAC7B,OAAOJ,GAAG,CAACK,IAAI,CAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC;IACN;IAEA,MAAMC,YAAY,GAAG9D,OAAO,CAAC,CAAC,CAAC;IAC/B,MAAMyE,uBAAuB,GAAGX,YAAY,CAAC/C,KAAK,GAAG+C,YAAY,CAAC/C,KAAK,CAACiD,KAAK,CAAC,IAAI,CAAC,CAACJ,MAAM,GAAG,CAAC;;IAE9F;IACA,IAAI,CAAC7C,KAAK,IAAIA,KAAK,CAAC6C,MAAM,KAAK,CAAC,EAAE;MAC9B,MAAMc,SAAS,GAAG,uEAAuE;MACzFvF,UAAU,CAACS,KAAK,CAAC8E,SAAS,EAAE,CAACjB,mBAAmB,EAAE7C,KAAK,CAAC,EAAGf,GAAG,IAAK;QAC/D,IAAIA,GAAG,EAAE;UACL,OAAO2D,GAAG,CAACK,IAAI,CAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;QACN;;QAEA;QACA,MAAMc,cAAc,GAAG,iFAAiF;QACxGxF,UAAU,CAACS,KAAK,CAAC+E,cAAc,EAAE,CAACF,uBAAuB,EAAEX,YAAY,CAACM,SAAS,CAAC,EAAGvE,GAAG,IAAK;UACzF,IAAIA,GAAG,EAAE;YACL,OAAO2D,GAAG,CAACK,IAAI,CAAE;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,CAAC;UACN;UAEAL,GAAG,CAACK,IAAI,CAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;QACN,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC,MAAM;MACH;MACA,MAAMe,kBAAkB,GAAG7D,KAAK,CAAC6C,MAAM;MACvC,MAAMiB,UAAU,GAAGJ,uBAAuB,GAAGG,kBAAkB;;MAE/D;MACA,MAAME,WAAW,GAAG/D,KAAK,IAAIA,KAAK,CAAC6C,MAAM,GAAG7C,KAAK,CAACQ,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;MACjE,MAAMwD,UAAU,GAAGb,IAAI,IAAIA,IAAI,CAACN,MAAM,GAAGM,IAAI,CAAC3C,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE;MAE7D,MAAMyD,SAAS,GAAI;AAC/B;AACA;AACA;AACA,aAAa;MAED7F,UAAU,CAACS,KAAK,CAACoF,SAAS,EAAE,CAACF,WAAW,EAAEC,UAAU,EAAEtB,mBAAmB,EAAE7C,KAAK,CAAC,EAAGf,GAAG,IAAK;QACxF,IAAIA,GAAG,EAAE;UACL,OAAO2D,GAAG,CAACK,IAAI,CAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;QACN;;QAEA;QACA,IAAIgB,UAAU,KAAK,CAAC,EAAE;UAClB,MAAMF,cAAc,GAAG,iFAAiF;UACxGxF,UAAU,CAACS,KAAK,CAAC+E,cAAc,EAAE,CAACE,UAAU,EAAEf,YAAY,CAACM,SAAS,CAAC,EAAGvE,GAAG,IAAK;YAC5E,IAAIA,GAAG,EAAE;cACL,OAAO2D,GAAG,CAACK,IAAI,CAAE;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,CAAC;YACN;YAEAL,GAAG,CAACK,IAAI,CAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,CAAC;UACN,CAAC,CAAC;QACN,CAAC,MAAM;UACHL,GAAG,CAACK,IAAI,CAAE;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;QACN;MACJ,CAAC,CAAC;IACN;EACJ,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACA,MAAMoB,aAAa,GAAG,UAAU,CAAC,CAAE;;AAEnC;AACA,SAASC,cAAcA,CAAC3B,GAAG,EAAEC,GAAG,EAAE2B,IAAI,EAAE;EACpC,MAAM5E,IAAI,GAAGgD,GAAG,CAAC6B,OAAO,CAAC,eAAe,CAAC;EAEzC,IAAI,CAAC7E,IAAI,EAAE;IACPiD,GAAG,CAAC6B,SAAS,CAAC,kBAAkB,EAAE,0BAA0B,CAAC;IAC7D,OAAO7B,GAAG,CAAC8B,MAAM,CAAC,GAAG,CAAC,CAACzB,IAAI,CAAC,0BAA0B,CAAC;EAC3D;EAEA,MAAM0B,OAAO,GAAGhF,IAAI,CAACyD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAClC,MAAMwB,OAAO,GAAGC,MAAM,CAAChE,IAAI,CAAC8D,OAAO,EAAE,QAAQ,CAAC,CAACG,QAAQ,CAAC,OAAO,CAAC;EAChE,MAAM,CAACC,QAAQ,EAAEnG,QAAQ,CAAC,GAAGgG,OAAO,CAACxB,KAAK,CAAC,GAAG,CAAC;EAE/C,IAAI2B,QAAQ,KAAK,OAAO,IAAInG,QAAQ,KAAKyF,aAAa,EAAE;IACpD,OAAOE,IAAI,CAAC,CAAC;EACjB;EAEA3B,GAAG,CAAC6B,SAAS,CAAC,kBAAkB,EAAE,0BAA0B,CAAC;EAC7D,OAAO7B,GAAG,CAAC8B,MAAM,CAAC,GAAG,CAAC,CAACzB,IAAI,CAAC,wBAAwB,CAAC;AACzD;AAEAhF,GAAG,CAAC+G,GAAG,CAAC,QAAQ,EAAEV,cAAc,EAAE,CAAC3B,GAAG,EAAEC,GAAG,KAAK;EAC5C,MAAMG,GAAG,GAAG,gDAAgD;EAE5DxE,UAAU,CAACS,KAAK,CAAC+D,GAAG,EAAE,CAAC9D,GAAG,EAAEG,OAAO,KAAK;IACpC,IAAIH,GAAG,EAAE;MACL,OAAO2D,GAAG,CAACK,IAAI,CAAC,iCAAiC,CAAC;IACtD;;IAEA;IACA,IAAIjC,IAAI,GAAI;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;IAED5B,OAAO,CAACqE,OAAO,CAACP,YAAY,IAAI;MAC5BlC,IAAI,IAAK;AACrB;AACA,0BAA0BkC,YAAY,CAACL,mBAAoB;AAC3D,0BAA0BK,YAAY,CAAClD,KAAM;AAC7C,0BAA0BkD,YAAY,CAACM,SAAU;AACjD,0BAA0BN,YAAY,CAAC/C,KAAM;AAC7C,0BAA0B+C,YAAY,CAACI,IAAK;AAC5C;AACA;AACA,qFAAqFJ,YAAY,CAACL,mBAAoB;AACtH;AACA;AACA;AACA;AACA,aAAa;IACL,CAAC,CAAC;IAEF7B,IAAI,IAAI,UAAU;IAClB4B,GAAG,CAACK,IAAI,CAACjC,IAAI,CAAC;EAClB,CAAC,CAAC;AACN,CAAC,CAAC;AAEF/C,GAAG,CAACyE,IAAI,CAAC,WAAW,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACtC,MAAM;IAAE5C,KAAK;IAAEC,kBAAkB;IAAEC,QAAQ;IAAEC,KAAK;IAAEC;EAAQ,CAAC,GAAGuC,GAAG,CAACG,IAAI;EAExE,IAAI;IACA,MAAM/C,qBAAqB,CAACC,KAAK,EAAEC,kBAAkB,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,OAAO,CAAC;IAChFwC,GAAG,CAAC8B,MAAM,CAAC,GAAG,CAAC,CAACzB,IAAI,CAAC,sCAAsC,CAAC;EAChE,CAAC,CAAC,OAAO9D,KAAK,EAAE;IACZyD,GAAG,CAAC8B,MAAM,CAAC,GAAG,CAAC,CAACzB,IAAI,CAAC,4CAA4C,CAAC;EACtE;AACJ,CAAC,CAAC;AAEFhF,GAAG,CAACyE,IAAI,CAAC,eAAe,EAAE4B,cAAc,EAAE,CAAC3B,GAAG,EAAEC,GAAG,KAAK;EACpD,MAAM3C,kBAAkB,GAAG0C,GAAG,CAACG,IAAI,CAACD,mBAAmB;;EAEvD;EACA,MAAMoC,SAAS,GAAG,2DAA2D;EAE7E1G,UAAU,CAACS,KAAK,CAACiG,SAAS,EAAE,CAAChF,kBAAkB,CAAC,EAAE,CAAChB,GAAG,EAAEG,OAAO,KAAK;IAChE,IAAIH,GAAG,IAAIG,OAAO,CAAC4D,MAAM,KAAK,CAAC,EAAE;MAC7B,OAAOJ,GAAG,CAACK,IAAI,CAAC,iCAAiC,CAAC;IACtD;IAEA,MAAMC,YAAY,GAAG9D,OAAO,CAAC,CAAC,CAAC;IAC/B,MAAM8F,cAAc,GAAGhC,YAAY,CAAC/C,KAAK,CAACiD,KAAK,CAAC,IAAI,CAAC,CAACJ,MAAM,CAAC,CAAE;;IAE/D;IACA,MAAMc,SAAS,GAAG,yDAAyD;IAC3EvF,UAAU,CAACS,KAAK,CAAC8E,SAAS,EAAE,CAAC7D,kBAAkB,CAAC,EAAGhB,GAAG,IAAK;MACvD,IAAIA,GAAG,EAAE;QACL,OAAO2D,GAAG,CAACK,IAAI,CAAC,kCAAkC,CAAC;MACvD;;MAEA;MACA,MAAMc,cAAc,GAAG,iFAAiF;MACxGxF,UAAU,CAACS,KAAK,CAAC+E,cAAc,EAAE,CAACmB,cAAc,EAAEhC,YAAY,CAACM,SAAS,CAAC,EAAGvE,GAAG,IAAK;QAChF,IAAIA,GAAG,EAAE;UACL,OAAO2D,GAAG,CAACK,IAAI,CAAC,uBAAuB,CAAC;QAC5C;QAEAL,GAAG,CAACuC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAE;MAC7B,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACAlH,GAAG,CAAC+G,GAAG,CAAC,GAAG,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EACvBA,GAAG,CAACwC,QAAQ,CAACC,SAAS,GAAG,oBAAoB,CAAC;AAClD,CAAC,CAAC;AAEFpH,GAAG,CAAC+G,GAAG,CAAC,gBAAgB,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EACpCA,GAAG,CAACwC,QAAQ,CAACC,SAAS,GAAG,uBAAuB,CAAC;AACrD,CAAC,CAAC;AAEFpH,GAAG,CAAC+G,GAAG,CAAC,WAAW,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EAC/BA,GAAG,CAACwC,QAAQ,CAACC,SAAS,GAAG,uBAAuB,CAAC;AACrD,CAAC,CAAC;AAEFpH,GAAG,CAAC+G,GAAG,CAAC,MAAM,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EAC5BA,GAAG,CAACwC,QAAQ,CAACC,SAAS,GAAG,kBAAkB,CAAC;AAC9C,CAAC,CAAC;AAEFpH,GAAG,CAAC+G,GAAG,CAAC,iBAAiB,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EACvCA,GAAG,CAACwC,QAAQ,CAACC,SAAS,GAAG,kBAAkB,CAAC;AAC9C,CAAC,CAAC;AAEFpH,GAAG,CAAC+G,GAAG,CAAC,QAAQ,EAAE,CAACrC,GAAG,EAAEC,GAAG,KAAK;EAC5B,MAAMG,GAAG,GAAG,mDAAmD;EAC/DxE,UAAU,CAACS,KAAK,CAAC+D,GAAG,EAAE,CAAC9D,GAAG,EAAEG,OAAO,KAAK;IACpC,IAAIH,GAAG,EAAE;MACL,OAAO2D,GAAG,CAAC8B,MAAM,CAAC,GAAG,CAAC,CAACpG,IAAI,CAAC;QAAEa,KAAK,EAAE;MAAiC,CAAC,CAAC;IAC5E;IACAyD,GAAG,CAACtE,IAAI,CAACc,OAAO,CAAC;EACrB,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACAnB,GAAG,CAACyE,IAAI,CAAC,SAAS,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC9B,MAAM;IAAE1C,QAAQ;IAAEF,KAAK;IAAEG,KAAK;IAAEmD;EAAK,CAAC,GAAGX,GAAG,CAACG,IAAI;EACjD,MAAM7C,kBAAkB,GAAGyB,0BAA0B,CAAC,CAAC;;EAEvD;EACA,MAAM4D,aAAa,GAAG,4DAA4D;EAClF/G,UAAU,CAACS,KAAK,CAACsG,aAAa,EAAE,CAACpF,QAAQ,CAAC,EAAE,CAACjB,GAAG,EAAEG,OAAO,KAAK;IAC1D,IAAIH,GAAG,IAAIG,OAAO,CAAC4D,MAAM,KAAK,CAAC,EAAE;MAC7B9D,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;MAC3C,OAAO2D,GAAG,CAACK,IAAI,CAAE;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,CAAC;IACN;IAEA,MAAMsC,cAAc,GAAGnG,OAAO,CAAC,CAAC,CAAC,CAACoG,eAAe;;IAEjD;IACA,IAAID,cAAc,GAAGpF,KAAK,CAAC6C,MAAM,EAAE;MAC/B,OAAOJ,GAAG,CAACK,IAAI,CAAE;AAC7B;AACA;AACA;AACA;AACA;AACA,uFAAuF/C,QAAS;AAChG;AACA,aAAa,CAAC;IACN;;IAEA;IACA,MAAMuF,cAAc,GAAG,iFAAiF;IACxGlH,UAAU,CAACS,KAAK,CAACyG,cAAc,EAAE,CAACtF,KAAK,CAAC6C,MAAM,EAAE9C,QAAQ,CAAC,EAAGjB,GAAG,IAAK;MAChE,IAAIA,GAAG,EAAE;QACLC,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEF,GAAG,CAAC;QAC3C,OAAO2D,GAAG,CAACK,IAAI,CAAE;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,CAAC;MACN;;MAEA;MACA,MAAMF,GAAG,GAAI;AACzB;AACA;AACA,aAAa;MACD,MAAMmB,WAAW,GAAG/D,KAAK,CAACQ,IAAI,CAAC,IAAI,CAAC;MACpC,MAAMwD,UAAU,GAAGb,IAAI,CAAC3C,IAAI,CAAC,IAAI,CAAC;MAElCpC,UAAU,CAACS,KAAK,CAAC+D,GAAG,EAAE,CAAC9C,kBAAkB,EAAED,KAAK,EAAEE,QAAQ,EAAEgE,WAAW,EAAEC,UAAU,CAAC,EAAGlF,GAAG,IAAK;QAC3F,IAAIA,GAAG,EAAE;UACLC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAC;UACrC,OAAO2D,GAAG,CAACK,IAAI,CAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,CAAC;QACN;;QAEA;QACA,MAAM7C,OAAO,GAAI,oDAAmDH,kBAAmB,EAAC;QACxFF,qBAAqB,CAACC,KAAK,EAAEC,kBAAkB,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,OAAO,CAAC;;QAE1E;QACAwC,GAAG,CAACK,IAAI,CAAE;AAC1B;AACA;AACA;AACA;AACA;AACA,6CAA6C9C,KAAK,CAAC6C,MAAO,sBAAqB9C,QAAS;AACxF,6DAA6DD,kBAAmB;AAChF;AACA;AACA;AACA,iBAAiB,CAAC;MACN,CAAC,CAAC;IACN,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC;;AAEF;AACA,MAAMyF,IAAI,GAAGC,OAAO,CAACC,GAAG,CAACF,IAAI,IAAI,IAAI;AACrCzH,GAAG,CAAC4H,MAAM,CAACH,IAAI,EAAE,MAAM;EACnBxG,OAAO,CAACI,GAAG,CAAE,0BAAyBoG,IAAK,EAAC,CAAC;AACjD,CAAC,CAAC"}},"mtime":1728436295589},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\TESTEMAIL.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst nodemailer = require('nodemailer');\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    pass: 'vsjwbdbfhvqrvyqw'\n  },\n  tls: {\n    rejectUnauthorized: false\n  }\n});\nconst mailOptions = {\n  from: 'donotreply@hauntbrunswick.com',\n  to: '696969ik@gmail.com',\n  subject: 'Test Email',\n  text: 'This is a test email to verify the app password.'\n};\ntransporter.sendMail(mailOptions, (error, info) => {\n  if (error) {\n    console.error('Error sending email:', error);\n  } else {\n    console.log('Email sent:', info.response);\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwicmVxdWlyZSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJ0bHMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic2VuZE1haWwiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcQW5kcmV3XFxEb2N1bWVudHNcXFByb2plY3RzXFxISCAyNCdcXGhhdW50YnJ1bnN3aWNrLmNvbVxcIiwic291cmNlcyI6WyJURVNURU1BSUwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gIGhvc3Q6ICdzbXRwLm9mZmljZTM2NS5jb20nLFxyXG4gIHBvcnQ6IDU4NyxcclxuICBzZWN1cmU6IGZhbHNlLCAvLyBVc2UgVExTXHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcjogJ2Rvbm90cmVwbHlAaGF1bnRicnVuc3dpY2suY29tJyxcclxuICAgIHBhc3M6ICd2c2p3YmRiZmh2cXJ2eXF3J1xyXG4gIH0sXHJcbiAgdGxzOiB7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gIGZyb206ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsXHJcbiAgdG86ICc2OTY5Njlpa0BnbWFpbC5jb20nLFxyXG4gIHN1YmplY3Q6ICdUZXN0IEVtYWlsJyxcclxuICB0ZXh0OiAnVGhpcyBpcyBhIHRlc3QgZW1haWwgdG8gdmVyaWZ5IHRoZSBhcHAgcGFzc3dvcmQuJ1xyXG59O1xyXG5cclxudHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIChlcnJvciwgaW5mbykgPT4ge1xyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50OicsIGluZm8ucmVzcG9uc2UpO1xyXG4gIH1cclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFeEMsTUFBTUMsV0FBVyxHQUFHRixVQUFVLENBQUNHLGVBQWUsQ0FBQztFQUM3Q0MsSUFBSSxFQUFFLG9CQUFvQjtFQUMxQkMsSUFBSSxFQUFFLEdBQUc7RUFDVEMsTUFBTSxFQUFFLEtBQUs7RUFBRTtFQUNmQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFLCtCQUErQjtJQUNyQ0MsSUFBSSxFQUFFO0VBQ1IsQ0FBQztFQUNEQyxHQUFHLEVBQUU7SUFDSEMsa0JBQWtCLEVBQUU7RUFDdEI7QUFDRixDQUFDLENBQUM7QUFFRixNQUFNQyxXQUFXLEdBQUc7RUFDbEJDLElBQUksRUFBRSwrQkFBK0I7RUFDckNDLEVBQUUsRUFBRSxvQkFBb0I7RUFDeEJDLE9BQU8sRUFBRSxZQUFZO0VBQ3JCQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRURkLFdBQVcsQ0FBQ2UsUUFBUSxDQUFDTCxXQUFXLEVBQUUsQ0FBQ00sS0FBSyxFQUFFQyxJQUFJLEtBQUs7RUFDakQsSUFBSUQsS0FBSyxFQUFFO0lBQ1RFLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLHNCQUFzQixFQUFFQSxLQUFLLENBQUM7RUFDOUMsQ0FBQyxNQUFNO0lBQ0xFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGFBQWEsRUFBRUYsSUFBSSxDQUFDRyxRQUFRLENBQUM7RUFDM0M7QUFDRixDQUFDLENBQUMifQ==","map":{"version":3,"names":["nodemailer","require","transporter","createTransport","host","port","secure","auth","user","pass","tls","rejectUnauthorized","mailOptions","from","to","subject","text","sendMail","error","info","console","log","response"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["TESTEMAIL.js"],"sourcesContent":["const nodemailer = require('nodemailer');\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  host: 'smtp.office365.com',\r\n  port: 587,\r\n  secure: false, // Use TLS\r\n  auth: {\r\n    user: 'donotreply@hauntbrunswick.com',\r\n    pass: 'vsjwbdbfhvqrvyqw'\r\n  },\r\n  tls: {\r\n    rejectUnauthorized: false\r\n  }\r\n});\r\n\r\nconst mailOptions = {\r\n  from: 'donotreply@hauntbrunswick.com',\r\n  to: '696969ik@gmail.com',\r\n  subject: 'Test Email',\r\n  text: 'This is a test email to verify the app password.'\r\n};\r\n\r\ntransporter.sendMail(mailOptions, (error, info) => {\r\n  if (error) {\r\n    console.error('Error sending email:', error);\r\n  } else {\r\n    console.log('Email sent:', info.response);\r\n  }\r\n});\r\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AAExC,MAAMC,WAAW,GAAGF,UAAU,CAACG,eAAe,CAAC;EAC7CC,IAAI,EAAE,oBAAoB;EAC1BC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,KAAK;EAAE;EACfC,IAAI,EAAE;IACJC,IAAI,EAAE,+BAA+B;IACrCC,IAAI,EAAE;EACR,CAAC;EACDC,GAAG,EAAE;IACHC,kBAAkB,EAAE;EACtB;AACF,CAAC,CAAC;AAEF,MAAMC,WAAW,GAAG;EAClBC,IAAI,EAAE,+BAA+B;EACrCC,EAAE,EAAE,oBAAoB;EACxBC,OAAO,EAAE,YAAY;EACrBC,IAAI,EAAE;AACR,CAAC;AAEDd,WAAW,CAACe,QAAQ,CAACL,WAAW,EAAE,CAACM,KAAK,EAAEC,IAAI,KAAK;EACjD,IAAID,KAAK,EAAE;IACTE,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C,CAAC,MAAM;IACLE,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEF,IAAI,CAACG,QAAQ,CAAC;EAC3C;AACF,CAAC,CAAC"}},"mtime":1726936652383}}