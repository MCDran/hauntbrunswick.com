{"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst mysql = require('mysql2');\nconst crypto = require('crypto'); // For generating registration numbers\nconst nodemailer = require('nodemailer');\nconst QRCode = require('qrcode');\nconst path = require('path');\nconst app = express();\napp.use(bodyParser.urlencoded({\n  extended: true\n}));\napp.use(express.static('public'));\napp.use(express.json());\n\n// MySQL connection setup\nconst connection = mysql.createConnection({\n  host: '100.87.150.78',\n  // 192.168.100.100\n  port: '3667',\n  user: 'valak',\n  password: 'SLEEP4tG',\n  database: 'MYSQL_DATABASE'\n});\nconnection.connect(err => {\n  if (err) {\n    console.error('Error connecting to MySQL:', err.stack);\n    return;\n  }\n  console.log('Connected to MySQL');\n});\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\n  if (err) {\n    console.error('Error querying MySQL:', err.stack);\n  } else {\n    console.log('Test query successful, solution:', results[0].solution);\n  }\n});\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    // Your Office 365 email\n    pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\n  },\n\n  tls: {\n    rejectUnauthorized: false // This might help if there's an issue with the certificate\n  }\n});\n\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\n  // Generate the QR code\n  const qrCodeURL = await generateQRCode(registrationNumber, email);\n  const qrCodeData = `${registrationNumber}:${email}`;\n  const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\n  console.log(qrCodeURL);\n\n  // Email content with the embedded QR code\n  const emailContent = `\n        <h1>Thank you for registering!</h1>\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\n        <p>Time Slot: ${timeSlot}</p>\n        <p>Names of attendees: ${names.join(', ')}</p>\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\n        <p>Use the QR code below when checking in:</p>\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\n    `;\n\n  // Use Nodemailer to send the email (you likely have this setup already)\n  const mailOptions = {\n    from: 'donotreply@hauntbrunswick.com',\n    to: email,\n    subject: 'Your Haunted House Registration Confirmation',\n    html: emailContent,\n    attachments: [{\n      filename: 'qrcode.png',\n      content: qrCodeBuffer,\n      cid: 'qrCode' // Same CID as in the email content\n    }]\n  };\n\n  // Send the email\n  transporter.sendMail(mailOptions, (error, info) => {\n    if (error) {\n      console.error('Error sending email:', error);\n    } else {\n      console.log('Email sent: ' + info.response);\n    }\n  });\n}\nasync function generateQRCode(registrationNumber, email) {\n  try {\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\n    return qrCodeURL;\n  } catch (err) {\n    console.error('Failed to generate QR Code', err);\n    throw err;\n  }\n}\n\n// In-memory storage of available spots (this could also be in the database)\nlet availableSlots = {\n  '6:00 PM': 20,\n  '6:15 PM': 20,\n  '6:30 PM': 20,\n  '6:45 PM': 20,\n  '7:00 PM': 20,\n  '7:15 PM': 20,\n  '7:30 PM': 20,\n  '7:45 PM': 20,\n  '8:00 PM': 20,\n  '8:15 PM': 20,\n  '8:30 PM': 20,\n  '8:45 PM': 20\n};\nfunction generateRegistrationNumber() {\n  const now = new Date();\n  const day = String(now.getDate()).padStart(2, '0'); // DD\n  const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\n  const year = String(now.getFullYear()).slice(-2); // YY\n  const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\n  return `LC-${day}${month}${year}-${randomFourDigits}`;\n}\n\n//View registration\napp.post('/view-registration', (req, res) => {\n  const {\n    registration_number,\n    email\n  } = req.body;\n\n  // Query to find the registration based on registration number and email\n  const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sql, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const namesArray = registration.names.split(', ');\n    const agesArray = registration.ages.split(', ');\n    let registrationDetails = `\n            <head>\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                <title>Modify Registration</title>\n            </head>\n            <h2>Registration Details</h2>\n            <p>Registration Number: ${registration.registration_number}</p>\n            <p>Email: ${registration.email}</p>\n            <p>Time Slot: ${registration.time_slot}</p>\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\n        `;\n\n    // Generate attendee fields for modification\n    namesArray.forEach((name, index) => {\n      registrationDetails += `\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\n                    <label for=\"name${index + 1}\">Name:</label>\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\n                    <label for=\"age${index + 1}\">Age:</label>\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\n                        <option value=\"21-30\" ${agesArray[index] === '21-30' ? 'selected' : ''}>21-30</option>\n                        <option value=\"31-40\" ${agesArray[index] === '31-40' ? 'selected' : ''}>31-40</option>\n                        <option value=\"41-50\" ${agesArray[index] === '41-50' ? 'selected' : ''}>41-50</option>\n                        <option value=\"51+\" ${agesArray[index] === '51+' ? 'selected' : ''}>51+</option>\n                    </select>\n                    <button type=\"button\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\n                </div>\n            `;\n    });\n\n    // Add \"Remove All\" button and submit button\n    registrationDetails += `\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\n            </form>\n\n            <script>\n                // Function to remove individual attendees\n                function removeAttendee(index) {\n                    const attendeeElement = document.getElementById('attendee-' + index);\n                    attendeeElement.remove();\n                }\n\n                // Function to confirm removing all attendees\n                function confirmRemoveAll() {\n                    const attendeeElements = document.querySelectorAll('.attendee');\n\n                    if (attendeeElements.length === 0) {\n                        alert(\"No registrants to remove.\");\n                        return;\n                    }\n\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\n                    if (confirmed) {\n                        attendeeElements.forEach(attendee => attendee.remove());\n                    }\n                }\n            </script>\n        `;\n\n    // Return the registration details to the user\n    res.send(registrationDetails);\n  });\n});\napp.post('/modify-registration', (req, res) => {\n  const {\n    registration_number,\n    email,\n    names,\n    ages\n  } = req.body;\n\n  // Query to find the existing registration before making changes\n  const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\n  connection.query(sqlFind, [registration_number, email], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>No Registration Found</title>\n                </head>\n                <h1>No Registration Found</h1>\n                <p>We couldn't find a registration with that number and email.</p>\n                <a href=\"/view.html\">Try again</a>\n            `);\n    }\n    const registration = results[0];\n    const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\n\n    // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\n    if (!names || names.length === 0) {\n      const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\n      connection.query(sqlDelete, [registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Removal Failed</title>\n                        </head>\n                        <h1>Error</h1>\n                        <p>There was an issue removing your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Add back all spots when registration is removed\n        const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n        connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], err => {\n          if (err) {\n            return res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Error Updating</title>\n                            </head>\n                            <h1>Error Updating Spots</h1>\n                            <p>There was an issue updating the available spots for the time slot.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          }\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Removed</title>\n                        </head>\n                        <h1>Registration Removed</h1>\n                        <p>Your registration has been successfully removed.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        });\n      });\n    } else {\n      // Calculate the difference in registrant count (if any registrants were added or removed)\n      const newRegistrantCount = names.length;\n      const difference = existingRegistrantCount - newRegistrantCount;\n\n      // Safeguard for undefined names or ages when joining\n      const namesString = names && names.length ? names.join(', ') : '';\n      const agesString = ages && ages.length ? ages.join(', ') : '';\n      const sqlUpdate = `\n                UPDATE registrations\n                SET names = ?, ages = ?\n                WHERE registration_number = ? AND email = ?\n            `;\n      connection.query(sqlUpdate, [namesString, agesString, registration_number, email], err => {\n        if (err) {\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Update Failed</title>\n                        </head>\n                        <h1>Update Failed</h1>\n                        <p>There was an issue updating your registration. Please try again later.</p>\n                        <a href=\"/view.html\">Go back</a>\n                    `);\n        }\n\n        // Update spots remaining based on the difference in registrants\n        if (difference !== 0) {\n          const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n          connection.query(sqlUpdateSpots, [difference, registration.time_slot], err => {\n            if (err) {\n              return res.send(`\n                                <head>\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                    <title>Update Failed</title>\n                                </head>\n                                <h1>Error Updating Spots</h1>\n                                <p>There was an issue updating the available spots for the time slot.</p>\n                                <a href=\"/\">Go back to the home page</a>\n                            `);\n            }\n            res.send(`\n                            <head>\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                                <title>Registration Updated</title>\n                            </head>\n                            <h1>Registration Updated</h1>\n                            <p>Your registration has been successfully updated.</p>\n                            <a href=\"/\">Go back to the home page</a>\n                        `);\n          });\n        } else {\n          res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Updated</title>\n                        </head>\n                        <h1>Registration Updated</h1>\n                        <p>Your registration has been successfully updated.</p>\n                        <a href=\"/\">Go back to the home page</a>\n                    `);\n        }\n      });\n    }\n  });\n});\n\n//ADMIN page\nconst adminPassword = 'SLEEP4tG'; // Replace with your actual password\n\n// Middleware to protect the admin route\nfunction checkAdminAuth(req, res, next) {\n  const auth = req.headers['authorization'];\n  if (!auth) {\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n    return res.status(401).send('Authentication required.');\n  }\n  const encoded = auth.split(' ')[1];\n  const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\n  const [username, password] = decoded.split(':');\n  if (username === 'admin' && password === adminPassword) {\n    return next();\n  }\n  res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\n  return res.status(401).send('Authentication failed.');\n}\napp.get('/admin', checkAdminAuth, (req, res) => {\n  const sql = 'SELECT * FROM registrations ORDER BY time_slot';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.send('Error retrieving registrations.');\n    }\n\n    // Create HTML table for the registrations\n    let html = `\n            <h1>Admin: View Registrations</h1>\n            <table border=\"1\">\n                <tr>\n                    <th>Registration Number</th>\n                    <th>Email</th>\n                    <th>Time Slot</th>\n                    <th>Names</th>\n                    <th>Ages</th>\n                    <th>Action</th>\n                </tr>\n        `;\n    results.forEach(registration => {\n      html += `\n                <tr>\n                    <td>${registration.registration_number}</td>\n                    <td>${registration.email}</td>\n                    <td>${registration.time_slot}</td>\n                    <td>${registration.names}</td>\n                    <td>${registration.ages}</td>\n                    <td>\n                        <form action=\"/admin/delete\" method=\"POST\">\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\n                            <button type=\"submit\">Remove</button>\n                        </form>\n                    </td>\n                </tr>\n            `;\n    });\n    html += '</table>';\n    res.send(html);\n  });\n});\napp.post('/register', async (req, res) => {\n  const {\n    email,\n    registrationNumber,\n    timeSlot,\n    names,\n    viewUrl\n  } = req.body;\n  try {\n    await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n    res.status(200).send('Registration successful, email sent.');\n  } catch (error) {\n    res.status(500).send('Registration successful, but email failed.');\n  }\n});\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\n  const registrationNumber = req.body.registration_number;\n\n  // Retrieve the registration details\n  const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\n  connection.query(sqlSelect, [registrationNumber], (err, results) => {\n    if (err || results.length === 0) {\n      return res.send('Error finding the registration.');\n    }\n    const registration = results[0];\n    const numberOfPeople = registration.names.split(', ').length; // Split by comma to count names\n\n    // Delete the registration from the database\n    const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\n    connection.query(sqlDelete, [registrationNumber], err => {\n      if (err) {\n        return res.send('Error deleting the registration.');\n      }\n\n      // Add back the number of spots to the time slot\n      const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\n      connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], err => {\n        if (err) {\n          return res.send('Error updating spots.');\n        }\n        res.redirect('/admin'); // Refresh the admin page after deletion\n      });\n    });\n  });\n});\n\n// Serve the landing and registration pages\napp.get('/', (req, res) => {\n  res.sendFile(__dirname + '/public/index.html');\n});\napp.get('/register.html', (req, res) => {\n  res.sendFile(__dirname + '/public/register.html');\n});\napp.get('/spots', (req, res) => {\n  const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\n  connection.query(sql, (err, results) => {\n    if (err) {\n      return res.status(500).json({\n        error: 'Error fetching available spots'\n      });\n    }\n    res.json(results);\n  });\n});\n\n// Handle form submission\napp.post('/submit', (req, res) => {\n  const {\n    timeSlot,\n    email,\n    names,\n    ages\n  } = req.body;\n  const registrationNumber = generateRegistrationNumber();\n\n  // Step 1: Check the remaining spots from the database\n  const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\n  connection.query(checkSpotsSql, [timeSlot], (err, results) => {\n    if (err || results.length === 0) {\n      console.error('Error checking spots:', err);\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Could not retrieve available spots. Please try again later.</p>\n                <a href=\"/register.html\">Go back</a>\n            `);\n    }\n    const spotsRemaining = results[0].spots_remaining;\n\n    // Step 2: Check if there are enough spots\n    if (spotsRemaining < names.length) {\n      return res.send(`\n                <head>\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                    <title>Registration Failed</title>\n                </head>\n                <h1>Registration Failed</h1>\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\n                <a href=\"/register.html\">Go back and try another slot</a>\n            `);\n    }\n\n    // Step 3: Deduct the number of registered people from the available spots\n    const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\n    connection.query(updateSpotsSql, [names.length, timeSlot], err => {\n      if (err) {\n        console.error('Error updating spots:', err);\n        return res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Registration Failed</title>\n                    </head>\n                    <h1>Registration Failed</h1>\n                    <p>Could not update available spots. Please try again later.</p>\n                    <a href=\"/register.html\">Go back</a>\n                `);\n      }\n\n      // Step 4: Save registration to the MySQL database\n      const sql = `\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\n                VALUES (?, ?, ?, ?, ?)\n            `;\n      const namesString = names.join(', ');\n      const agesString = ages.join(', ');\n      connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], err => {\n        if (err) {\n          console.error('Database error:', err);\n          return res.send(`\n                        <head>\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                            <title>Registration Failed</title>\n                        </head>\n                        <h1>Registration Failed</h1>\n                        <p>There was an issue saving your registration. Please try again later.</p>\n                        <a href=\"/register.html\">Go back</a>\n                    `);\n        }\n\n        //Send email\n        const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\n        sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\n\n        // Return a confirmation\n        res.send(`\n                    <head>\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\n                        <title>Thank you!</title>\n                    </head>\n                    <h1>Thank you for registering!</h1>\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\n                    <a href=\"/\">Go back to the home page</a>\n                `);\n      });\n    });\n  });\n});\n\n// Start server\nconst PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(`Server running on port ${PORT}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJteXNxbCIsImNyeXB0byIsIm5vZGVtYWlsZXIiLCJRUkNvZGUiLCJwYXRoIiwiYXBwIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwic3RhdGljIiwianNvbiIsImNvbm5lY3Rpb24iLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInBvcnQiLCJ1c2VyIiwicGFzc3dvcmQiLCJkYXRhYmFzZSIsImNvbm5lY3QiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsImxvZyIsInF1ZXJ5IiwicmVzdWx0cyIsInNvbHV0aW9uIiwidHJhbnNwb3J0ZXIiLCJjcmVhdGVUcmFuc3BvcnQiLCJzZWN1cmUiLCJhdXRoIiwicGFzcyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsInNlbmRSZWdpc3RyYXRpb25FbWFpbCIsImVtYWlsIiwicmVnaXN0cmF0aW9uTnVtYmVyIiwidGltZVNsb3QiLCJuYW1lcyIsInZpZXdVcmwiLCJxckNvZGVVUkwiLCJnZW5lcmF0ZVFSQ29kZSIsInFyQ29kZURhdGEiLCJxckNvZGVCdWZmZXIiLCJ0b0J1ZmZlciIsImVtYWlsQ29udGVudCIsImpvaW4iLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJodG1sIiwiYXR0YWNobWVudHMiLCJmaWxlbmFtZSIsImNvbnRlbnQiLCJjaWQiLCJzZW5kTWFpbCIsImluZm8iLCJyZXNwb25zZSIsInRvRGF0YVVSTCIsImF2YWlsYWJsZVNsb3RzIiwiZ2VuZXJhdGVSZWdpc3RyYXRpb25OdW1iZXIiLCJub3ciLCJEYXRlIiwiZGF5IiwiU3RyaW5nIiwiZ2V0RGF0ZSIsInBhZFN0YXJ0IiwibW9udGgiLCJnZXRNb250aCIsInllYXIiLCJnZXRGdWxsWWVhciIsInNsaWNlIiwicmFuZG9tRm91ckRpZ2l0cyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInBvc3QiLCJyZXEiLCJyZXMiLCJyZWdpc3RyYXRpb25fbnVtYmVyIiwiYm9keSIsInNxbCIsImxlbmd0aCIsInNlbmQiLCJyZWdpc3RyYXRpb24iLCJuYW1lc0FycmF5Iiwic3BsaXQiLCJhZ2VzQXJyYXkiLCJhZ2VzIiwicmVnaXN0cmF0aW9uRGV0YWlscyIsInRpbWVfc2xvdCIsImZvckVhY2giLCJuYW1lIiwiaW5kZXgiLCJzcWxGaW5kIiwiZXhpc3RpbmdSZWdpc3RyYW50Q291bnQiLCJzcWxEZWxldGUiLCJzcWxVcGRhdGVTcG90cyIsIm5ld1JlZ2lzdHJhbnRDb3VudCIsImRpZmZlcmVuY2UiLCJuYW1lc1N0cmluZyIsImFnZXNTdHJpbmciLCJzcWxVcGRhdGUiLCJhZG1pblBhc3N3b3JkIiwiY2hlY2tBZG1pbkF1dGgiLCJuZXh0IiwiaGVhZGVycyIsInNldEhlYWRlciIsInN0YXR1cyIsImVuY29kZWQiLCJkZWNvZGVkIiwiQnVmZmVyIiwidG9TdHJpbmciLCJ1c2VybmFtZSIsImdldCIsInNxbFNlbGVjdCIsIm51bWJlck9mUGVvcGxlIiwicmVkaXJlY3QiLCJzZW5kRmlsZSIsIl9fZGlybmFtZSIsImNoZWNrU3BvdHNTcWwiLCJzcG90c1JlbWFpbmluZyIsInNwb3RzX3JlbWFpbmluZyIsInVwZGF0ZVNwb3RzU3FsIiwiUE9SVCIsInByb2Nlc3MiLCJlbnYiLCJsaXN0ZW4iXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcQW5kcmV3XFxEb2N1bWVudHNcXFByb2plY3RzXFxISCAyNCdcXGhhdW50YnJ1bnN3aWNrLmNvbVxcIiwic291cmNlcyI6WyJzZXJ2ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgYm9keVBhcnNlciA9IHJlcXVpcmUoJ2JvZHktcGFyc2VyJyk7XHJcbmNvbnN0IG15c3FsID0gcmVxdWlyZSgnbXlzcWwyJyk7XHJcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpOyAgLy8gRm9yIGdlbmVyYXRpbmcgcmVnaXN0cmF0aW9uIG51bWJlcnNcclxuY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuY29uc3QgUVJDb2RlID0gcmVxdWlyZSgncXJjb2RlJyk7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XHJcbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcclxuXHJcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xyXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSk7XHJcbmFwcC51c2UoZXhwcmVzcy5qc29uKCkpO1xyXG5cclxuLy8gTXlTUUwgY29ubmVjdGlvbiBzZXR1cFxyXG5jb25zdCBjb25uZWN0aW9uID0gbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XHJcbiAgICBob3N0OiAnMTAwLjg3LjE1MC43OCcsICAvLyAxOTIuMTY4LjEwMC4xMDBcclxuICAgIHBvcnQ6ICczNjY3JyxcclxuICAgIHVzZXI6ICd2YWxhaycsXHJcbiAgICBwYXNzd29yZDogJ1NMRUVQNHRHJyxcclxuICAgIGRhdGFiYXNlOiAnTVlTUUxfREFUQUJBU0UnXHJcbn0pO1xyXG5cclxuY29ubmVjdGlvbi5jb25uZWN0KChlcnIpID0+IHtcclxuICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjb25uZWN0aW5nIHRvIE15U1FMOicsIGVyci5zdGFjayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byBNeVNRTCcpO1xyXG59KTtcclxuXHJcbmNvbm5lY3Rpb24ucXVlcnkoJ1NFTEVDVCAxICsgMSBBUyBzb2x1dGlvbicsIChlcnIsIHJlc3VsdHMpID0+IHtcclxuICAgIGlmIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBxdWVyeWluZyBNeVNRTDonLCBlcnIuc3RhY2spO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnVGVzdCBxdWVyeSBzdWNjZXNzZnVsLCBzb2x1dGlvbjonLCByZXN1bHRzWzBdLnNvbHV0aW9uKTtcclxuICAgIH1cclxufSk7XHJcblxyXG5jb25zdCB0cmFuc3BvcnRlciA9IG5vZGVtYWlsZXIuY3JlYXRlVHJhbnNwb3J0KHtcclxuICAgIGhvc3Q6ICdzbXRwLm9mZmljZTM2NS5jb20nLFxyXG4gICAgcG9ydDogNTg3LFxyXG4gICAgc2VjdXJlOiBmYWxzZSwgLy8gVXNlIFRMU1xyXG4gICAgYXV0aDoge1xyXG4gICAgICAgIHVzZXI6ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsIC8vIFlvdXIgT2ZmaWNlIDM2NSBlbWFpbFxyXG4gICAgICAgIHBhc3M6ICd2c2p3YmRiZmh2cXJ2eXF3JyAvLyBZb3VyIE9mZmljZSAzNjUgYXBwIHBhc3N3b3JkXHJcbiAgICB9LFxyXG4gICAgdGxzOiB7XHJcbiAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSAvLyBUaGlzIG1pZ2h0IGhlbHAgaWYgdGhlcmUncyBhbiBpc3N1ZSB3aXRoIHRoZSBjZXJ0aWZpY2F0ZVxyXG4gICAgfVxyXG59KTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRSZWdpc3RyYXRpb25FbWFpbChlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwpIHtcclxuICAgIC8vIEdlbmVyYXRlIHRoZSBRUiBjb2RlXHJcbiAgICBjb25zdCBxckNvZGVVUkwgPSBhd2FpdCBnZW5lcmF0ZVFSQ29kZShyZWdpc3RyYXRpb25OdW1iZXIsIGVtYWlsKTtcclxuICAgIGNvbnN0IHFyQ29kZURhdGEgPSBgJHtyZWdpc3RyYXRpb25OdW1iZXJ9OiR7ZW1haWx9YDtcclxuICAgIGNvbnN0IHFyQ29kZUJ1ZmZlciA9IGF3YWl0IFFSQ29kZS50b0J1ZmZlcihxckNvZGVEYXRhKTtcclxuICAgIGNvbnNvbGUubG9nKHFyQ29kZVVSTCk7XHJcblxyXG4gICAgLy8gRW1haWwgY29udGVudCB3aXRoIHRoZSBlbWJlZGRlZCBRUiBjb2RlXHJcbiAgICBjb25zdCBlbWFpbENvbnRlbnQgPSBgXHJcbiAgICAgICAgPGgxPlRoYW5rIHlvdSBmb3IgcmVnaXN0ZXJpbmchPC9oMT5cclxuICAgICAgICA8cD5Zb3UgaGF2ZSByZWdpc3RlcmVkIGZvciB0aGUgZm9sbG93aW5nIHRpbWUgc2xvdCBvbiA8c3Ryb25nPlN1bmRheSwgT2N0b2JlciAyN3RoPC9zdHJvbmc+OjwvcD5cclxuICAgICAgICA8cD5UaW1lIFNsb3Q6ICR7dGltZVNsb3R9PC9wPlxyXG4gICAgICAgIDxwPk5hbWVzIG9mIGF0dGVuZGVlczogJHtuYW1lcy5qb2luKCcsICcpfTwvcD5cclxuICAgICAgICA8cD5Zb3UgY2FuIHZpZXcgeW91ciByZWdpc3RyYXRpb24gZGV0YWlscyBhdCA8YSBocmVmPVwiJHt2aWV3VXJsfVwiPnRoaXMgbGluazwvYT4uPC9wPlxyXG4gICAgICAgIDxwPlVzZSB0aGUgUVIgY29kZSBiZWxvdyB3aGVuIGNoZWNraW5nIGluOjwvcD5cclxuICAgICAgICA8aW1nIHNyYz1cImNpZDpxckNvZGVcIiBhbHQ9XCJRUiBDb2RlXCIgLz5cclxuICAgIGA7XHJcblxyXG4gICAgLy8gVXNlIE5vZGVtYWlsZXIgdG8gc2VuZCB0aGUgZW1haWwgKHlvdSBsaWtlbHkgaGF2ZSB0aGlzIHNldHVwIGFscmVhZHkpXHJcbiAgICBjb25zdCBtYWlsT3B0aW9ucyA9IHtcclxuICAgICAgICBmcm9tOiAnZG9ub3RyZXBseUBoYXVudGJydW5zd2ljay5jb20nLFxyXG4gICAgICAgIHRvOiBlbWFpbCxcclxuICAgICAgICBzdWJqZWN0OiAnWW91ciBIYXVudGVkIEhvdXNlIFJlZ2lzdHJhdGlvbiBDb25maXJtYXRpb24nLFxyXG4gICAgICAgIGh0bWw6IGVtYWlsQ29udGVudCxcclxuICAgICAgICBhdHRhY2htZW50czogW3tcclxuICAgICAgICAgIGZpbGVuYW1lOiAncXJjb2RlLnBuZycsXHJcbiAgICAgICAgICBjb250ZW50OiBxckNvZGVCdWZmZXIsXHJcbiAgICAgICAgICBjaWQ6ICdxckNvZGUnICAvLyBTYW1lIENJRCBhcyBpbiB0aGUgZW1haWwgY29udGVudFxyXG4gICAgICAgIH1dXHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNlbmQgdGhlIGVtYWlsXHJcbiAgICB0cmFuc3BvcnRlci5zZW5kTWFpbChtYWlsT3B0aW9ucywgKGVycm9yLCBpbmZvKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgZW1haWw6JywgZXJyb3IpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50OiAnICsgaW5mby5yZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUVJDb2RlKHJlZ2lzdHJhdGlvbk51bWJlciwgZW1haWwpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcXJDb2RlRGF0YSA9IGAke3JlZ2lzdHJhdGlvbk51bWJlcn06JHtlbWFpbH1gOyAvLyBUaGUgZGF0YSB5b3Ugd2FudCB0byBlbmNvZGUgaW4gdGhlIFFSIGNvZGVcclxuICAgIGNvbnN0IHFyQ29kZVVSTCA9IGF3YWl0IFFSQ29kZS50b0RhdGFVUkwocXJDb2RlRGF0YSk7IC8vIEdlbmVyYXRlcyBhIGJhc2U2NCBpbWFnZSBVUkxcclxuICAgIHJldHVybiBxckNvZGVVUkw7XHJcbiAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZ2VuZXJhdGUgUVIgQ29kZScsIGVycik7XHJcbiAgICB0aHJvdyBlcnI7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBJbi1tZW1vcnkgc3RvcmFnZSBvZiBhdmFpbGFibGUgc3BvdHMgKHRoaXMgY291bGQgYWxzbyBiZSBpbiB0aGUgZGF0YWJhc2UpXHJcbmxldCBhdmFpbGFibGVTbG90cyA9IHtcclxuICAgICc2OjAwIFBNJzogMjAsXHJcbiAgICAnNjoxNSBQTSc6IDIwLFxyXG4gICAgJzY6MzAgUE0nOiAyMCxcclxuICAgICc2OjQ1IFBNJzogMjAsXHJcbiAgICAnNzowMCBQTSc6IDIwLFxyXG4gICAgJzc6MTUgUE0nOiAyMCxcclxuICAgICc3OjMwIFBNJzogMjAsXHJcbiAgICAnNzo0NSBQTSc6IDIwLFxyXG4gICAgJzg6MDAgUE0nOiAyMCxcclxuICAgICc4OjE1IFBNJzogMjAsXHJcbiAgICAnODozMCBQTSc6IDIwLFxyXG4gICAgJzg6NDUgUE0nOiAyMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2VuZXJhdGVSZWdpc3RyYXRpb25OdW1iZXIoKSB7XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgZGF5ID0gU3RyaW5nKG5vdy5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7ICAgICAgLy8gRERcclxuICAgIGNvbnN0IG1vbnRoID0gU3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKTsgLy8gTU1cclxuICAgIGNvbnN0IHllYXIgPSBTdHJpbmcobm93LmdldEZ1bGxZZWFyKCkpLnNsaWNlKC0yKTsgICAgICAgIC8vIFlZXHJcbiAgICBjb25zdCByYW5kb21Gb3VyRGlnaXRzID0gTWF0aC5mbG9vcigxMDAwICsgTWF0aC5yYW5kb20oKSAqIDkwMDApO1xyXG4gICAgcmV0dXJuIGBMQy0ke2RheX0ke21vbnRofSR7eWVhcn0tJHtyYW5kb21Gb3VyRGlnaXRzfWA7XHJcbn1cclxuXHJcbi8vVmlldyByZWdpc3RyYXRpb25cclxuYXBwLnBvc3QoJy92aWV3LXJlZ2lzdHJhdGlvbicsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyByZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbCB9ID0gcmVxLmJvZHk7XHJcblxyXG4gICAgLy8gUXVlcnkgdG8gZmluZCB0aGUgcmVnaXN0cmF0aW9uIGJhc2VkIG9uIHJlZ2lzdHJhdGlvbiBudW1iZXIgYW5kIGVtYWlsXHJcbiAgICBjb25zdCBzcWwgPSAnU0VMRUNUICogRlJPTSByZWdpc3RyYXRpb25zIFdIRVJFIHJlZ2lzdHJhdGlvbl9udW1iZXIgPSA/IEFORCBlbWFpbCA9ID8nO1xyXG4gICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIFtyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbF0sIChlcnIsIHJlc3VsdHMpID0+IHtcclxuICAgICAgICBpZiAoZXJyIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRpdGxlPk5vIFJlZ2lzdHJhdGlvbiBGb3VuZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+Tm8gUmVnaXN0cmF0aW9uIEZvdW5kPC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPldlIGNvdWxkbid0IGZpbmQgYSByZWdpc3RyYXRpb24gd2l0aCB0aGF0IG51bWJlciBhbmQgZW1haWwuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5UcnkgYWdhaW48L2E+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gcmVzdWx0c1swXTtcclxuICAgICAgICBjb25zdCBuYW1lc0FycmF5ID0gcmVnaXN0cmF0aW9uLm5hbWVzLnNwbGl0KCcsICcpO1xyXG4gICAgICAgIGNvbnN0IGFnZXNBcnJheSA9IHJlZ2lzdHJhdGlvbi5hZ2VzLnNwbGl0KCcsICcpO1xyXG5cclxuICAgICAgICBsZXQgcmVnaXN0cmF0aW9uRGV0YWlscyA9IGBcclxuICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICA8dGl0bGU+TW9kaWZ5IFJlZ2lzdHJhdGlvbjwvdGl0bGU+XHJcbiAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgPGgyPlJlZ2lzdHJhdGlvbiBEZXRhaWxzPC9oMj5cclxuICAgICAgICAgICAgPHA+UmVnaXN0cmF0aW9uIE51bWJlcjogJHtyZWdpc3RyYXRpb24ucmVnaXN0cmF0aW9uX251bWJlcn08L3A+XHJcbiAgICAgICAgICAgIDxwPkVtYWlsOiAke3JlZ2lzdHJhdGlvbi5lbWFpbH08L3A+XHJcbiAgICAgICAgICAgIDxwPlRpbWUgU2xvdDogJHtyZWdpc3RyYXRpb24udGltZV9zbG90fTwvcD5cclxuICAgICAgICAgICAgPGZvcm0gaWQ9XCJtb2RpZnktZm9ybVwiIGFjdGlvbj1cIi9tb2RpZnktcmVnaXN0cmF0aW9uXCIgbWV0aG9kPVwiUE9TVFwiPlxyXG4gICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwicmVnaXN0cmF0aW9uX251bWJlclwiIHZhbHVlPVwiJHtyZWdpc3RyYXRpb24ucmVnaXN0cmF0aW9uX251bWJlcn1cIj5cclxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImVtYWlsXCIgdmFsdWU9XCIke3JlZ2lzdHJhdGlvbi5lbWFpbH1cIj5cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICAvLyBHZW5lcmF0ZSBhdHRlbmRlZSBmaWVsZHMgZm9yIG1vZGlmaWNhdGlvblxyXG4gICAgICAgIG5hbWVzQXJyYXkuZm9yRWFjaCgobmFtZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgcmVnaXN0cmF0aW9uRGV0YWlscyArPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXR0ZW5kZWVcIiBpZD1cImF0dGVuZGVlLSR7aW5kZXggKyAxfVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9XCJuYW1lJHtpbmRleCArIDF9XCI+TmFtZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwibmFtZSR7aW5kZXggKyAxfVwiIG5hbWU9XCJuYW1lc1tdXCIgdmFsdWU9XCIke25hbWV9XCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cImFnZSR7aW5kZXggKyAxfVwiPkFnZTo8L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9XCJhZ2Uke2luZGV4ICsgMX1cIiBuYW1lPVwiYWdlc1tdXCIgcmVxdWlyZWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCIxNi0yMFwiICR7YWdlc0FycmF5W2luZGV4XSA9PT0gJzE2LTIwJyA/ICdzZWxlY3RlZCcgOiAnJ30+MTYtMjA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjIxLTMwXCIgJHthZ2VzQXJyYXlbaW5kZXhdID09PSAnMjEtMzAnID8gJ3NlbGVjdGVkJyA6ICcnfT4yMS0zMDwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiMzEtNDBcIiAke2FnZXNBcnJheVtpbmRleF0gPT09ICczMS00MCcgPyAnc2VsZWN0ZWQnIDogJyd9PjMxLTQwPC9vcHRpb24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9XCI0MS01MFwiICR7YWdlc0FycmF5W2luZGV4XSA9PT0gJzQxLTUwJyA/ICdzZWxlY3RlZCcgOiAnJ30+NDEtNTA8L29wdGlvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIjUxK1wiICR7YWdlc0FycmF5W2luZGV4XSA9PT0gJzUxKycgPyAnc2VsZWN0ZWQnIDogJyd9PjUxKzwvb3B0aW9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxyXG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIG9uY2xpY2s9XCJyZW1vdmVBdHRlbmRlZSgke2luZGV4ICsgMX0pXCI+UmVtb3ZlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIFwiUmVtb3ZlIEFsbFwiIGJ1dHRvbiBhbmQgc3VibWl0IGJ1dHRvblxyXG4gICAgICAgIHJlZ2lzdHJhdGlvbkRldGFpbHMgKz0gYFxyXG4gICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgb25jbGljaz1cImNvbmZpcm1SZW1vdmVBbGwoKVwiPlJlbW92ZSBBbGw8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b25cIiB0eXBlPVwic3VibWl0XCI+U3VibWl0IENoYW5nZXM8L2J1dHRvbj5cclxuICAgICAgICAgICAgPC9mb3JtPlxyXG5cclxuICAgICAgICAgICAgPHNjcmlwdD5cclxuICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIHRvIHJlbW92ZSBpbmRpdmlkdWFsIGF0dGVuZGVlc1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlQXR0ZW5kZWUoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRlbmRlZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXR0ZW5kZWUtJyArIGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBhdHRlbmRlZUVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRnVuY3Rpb24gdG8gY29uZmlybSByZW1vdmluZyBhbGwgYXR0ZW5kZWVzXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjb25maXJtUmVtb3ZlQWxsKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dGVuZGVlRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYXR0ZW5kZWUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dGVuZGVlRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiTm8gcmVnaXN0cmFudHMgdG8gcmVtb3ZlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29uZmlybWVkID0gY29uZmlybShcIkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byByZW1vdmUgYWxsIHJlZ2lzdHJhbnRzP1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dGVuZGVlRWxlbWVudHMuZm9yRWFjaChhdHRlbmRlZSA9PiBhdHRlbmRlZS5yZW1vdmUoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICAvLyBSZXR1cm4gdGhlIHJlZ2lzdHJhdGlvbiBkZXRhaWxzIHRvIHRoZSB1c2VyXHJcbiAgICAgICAgcmVzLnNlbmQocmVnaXN0cmF0aW9uRGV0YWlscyk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5hcHAucG9zdCgnL21vZGlmeS1yZWdpc3RyYXRpb24nLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHsgcmVnaXN0cmF0aW9uX251bWJlciwgZW1haWwsIG5hbWVzLCBhZ2VzIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAvLyBRdWVyeSB0byBmaW5kIHRoZSBleGlzdGluZyByZWdpc3RyYXRpb24gYmVmb3JlIG1ha2luZyBjaGFuZ2VzXHJcbiAgICBjb25zdCBzcWxGaW5kID0gJ1NFTEVDVCAqIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyBBTkQgZW1haWwgPSA/JztcclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsRmluZCwgW3JlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsXSwgKGVyciwgcmVzdWx0cykgPT4ge1xyXG4gICAgICAgIGlmIChlcnIgfHwgcmVzdWx0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+Tm8gUmVnaXN0cmF0aW9uIEZvdW5kPC90aXRsZT5cclxuICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgIDxoMT5ObyBSZWdpc3RyYXRpb24gRm91bmQ8L2gxPlxyXG4gICAgICAgICAgICAgICAgPHA+V2UgY291bGRuJ3QgZmluZCBhIHJlZ2lzdHJhdGlvbiB3aXRoIHRoYXQgbnVtYmVyIGFuZCBlbWFpbC48L3A+XHJcbiAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3ZpZXcuaHRtbFwiPlRyeSBhZ2FpbjwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSByZXN1bHRzWzBdO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUmVnaXN0cmFudENvdW50ID0gcmVnaXN0cmF0aW9uLm5hbWVzID8gcmVnaXN0cmF0aW9uLm5hbWVzLnNwbGl0KCcsICcpLmxlbmd0aCA6IDA7XHJcblxyXG4gICAgICAgIC8vIElmICduYW1lcycgYXJyYXkgaXMgdW5kZWZpbmVkIG9yIGVtcHR5LCBkZWxldGUgdGhlIHJlZ2lzdHJhdGlvbiBhbmQgYWRkIHNwb3RzIGJhY2sgdG8gdGhlIHRpbWUgc2xvdFxyXG4gICAgICAgIGlmICghbmFtZXMgfHwgbmFtZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNxbERlbGV0ZSA9ICdERUxFVEUgRlJPTSByZWdpc3RyYXRpb25zIFdIRVJFIHJlZ2lzdHJhdGlvbl9udW1iZXIgPSA/IEFORCBlbWFpbCA9ID8nO1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbERlbGV0ZSwgW3JlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsXSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlbW92YWwgRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+RXJyb3I8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cD5UaGVyZSB3YXMgYW4gaXNzdWUgcmVtb3ZpbmcgeW91ciByZWdpc3RyYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3ZpZXcuaHRtbFwiPkdvIGJhY2s8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGJhY2sgYWxsIHNwb3RzIHdoZW4gcmVnaXN0cmF0aW9uIGlzIHJlbW92ZWRcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNxbFVwZGF0ZVNwb3RzID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgKyA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxVcGRhdGVTcG90cywgW2V4aXN0aW5nUmVnaXN0cmFudENvdW50LCByZWdpc3RyYXRpb24udGltZV9zbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+RXJyb3IgVXBkYXRpbmc8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkVycm9yIFVwZGF0aW5nIFNwb3RzPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSB1cGRhdGluZyB0aGUgYXZhaWxhYmxlIHNwb3RzIGZvciB0aGUgdGltZSBzbG90LjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIFJlbW92ZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gUmVtb3ZlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPllvdXIgcmVnaXN0cmF0aW9uIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSByZW1vdmVkLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBkaWZmZXJlbmNlIGluIHJlZ2lzdHJhbnQgY291bnQgKGlmIGFueSByZWdpc3RyYW50cyB3ZXJlIGFkZGVkIG9yIHJlbW92ZWQpXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1JlZ2lzdHJhbnRDb3VudCA9IG5hbWVzLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IGV4aXN0aW5nUmVnaXN0cmFudENvdW50IC0gbmV3UmVnaXN0cmFudENvdW50O1xyXG5cclxuICAgICAgICAgICAgLy8gU2FmZWd1YXJkIGZvciB1bmRlZmluZWQgbmFtZXMgb3IgYWdlcyB3aGVuIGpvaW5pbmdcclxuICAgICAgICAgICAgY29uc3QgbmFtZXNTdHJpbmcgPSBuYW1lcyAmJiBuYW1lcy5sZW5ndGggPyBuYW1lcy5qb2luKCcsICcpIDogJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGFnZXNTdHJpbmcgPSBhZ2VzICYmIGFnZXMubGVuZ3RoID8gYWdlcy5qb2luKCcsICcpIDogJyc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzcWxVcGRhdGUgPSBgXHJcbiAgICAgICAgICAgICAgICBVUERBVEUgcmVnaXN0cmF0aW9uc1xyXG4gICAgICAgICAgICAgICAgU0VUIG5hbWVzID0gPywgYWdlcyA9ID9cclxuICAgICAgICAgICAgICAgIFdIRVJFIHJlZ2lzdHJhdGlvbl9udW1iZXIgPSA/IEFORCBlbWFpbCA9ID9cclxuICAgICAgICAgICAgYDtcclxuXHJcbiAgICAgICAgICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsVXBkYXRlLCBbbmFtZXNTdHJpbmcsIGFnZXNTdHJpbmcsIHJlZ2lzdHJhdGlvbl9udW1iZXIsIGVtYWlsXSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlVwZGF0ZSBGYWlsZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5VcGRhdGUgRmFpbGVkPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+VGhlcmUgd2FzIGFuIGlzc3VlIHVwZGF0aW5nIHlvdXIgcmVnaXN0cmF0aW9uLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi92aWV3Lmh0bWxcIj5HbyBiYWNrPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzcG90cyByZW1haW5pbmcgYmFzZWQgb24gdGhlIGRpZmZlcmVuY2UgaW4gcmVnaXN0cmFudHNcclxuICAgICAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3FsVXBkYXRlU3BvdHMgPSAnVVBEQVRFIHRpbWVfc2xvdHMgU0VUIHNwb3RzX3JlbWFpbmluZyA9IHNwb3RzX3JlbWFpbmluZyArID8gV0hFUkUgdGltZV9zbG90ID0gPyc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxVcGRhdGVTcG90cywgW2RpZmZlcmVuY2UsIHJlZ2lzdHJhdGlvbi50aW1lX3Nsb3RdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlVwZGF0ZSBGYWlsZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+RXJyb3IgVXBkYXRpbmcgU3BvdHM8L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSB1cGRhdGluZyB0aGUgYXZhaWxhYmxlIHNwb3RzIGZvciB0aGUgdGltZSBzbG90LjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL1wiPkdvIGJhY2sgdG8gdGhlIGhvbWUgcGFnZTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZChgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPlJlZ2lzdHJhdGlvbiBVcGRhdGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gVXBkYXRlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5Zb3VyIHJlZ2lzdHJhdGlvbiBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgdXBkYXRlZC48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL1wiPkdvIGJhY2sgdG8gdGhlIGhvbWUgcGFnZTwvYT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIFVwZGF0ZWQ8L3RpdGxlPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gVXBkYXRlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPllvdXIgcmVnaXN0cmF0aW9uIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSB1cGRhdGVkLjwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9cIj5HbyBiYWNrIHRvIHRoZSBob21lIHBhZ2U8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vQURNSU4gcGFnZVxyXG5jb25zdCBhZG1pblBhc3N3b3JkID0gJ1NMRUVQNHRHJzsgIC8vIFJlcGxhY2Ugd2l0aCB5b3VyIGFjdHVhbCBwYXNzd29yZFxyXG5cclxuLy8gTWlkZGxld2FyZSB0byBwcm90ZWN0IHRoZSBhZG1pbiByb3V0ZVxyXG5mdW5jdGlvbiBjaGVja0FkbWluQXV0aChyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgY29uc3QgYXV0aCA9IHJlcS5oZWFkZXJzWydhdXRob3JpemF0aW9uJ107XHJcblxyXG4gICAgaWYgKCFhdXRoKSB7XHJcbiAgICAgICAgcmVzLnNldEhlYWRlcignV1dXLUF1dGhlbnRpY2F0ZScsICdCYXNpYyByZWFsbT1cIkFkbWluIEFyZWFcIicpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnQXV0aGVudGljYXRpb24gcmVxdWlyZWQuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZW5jb2RlZCA9IGF1dGguc3BsaXQoJyAnKVsxXTtcclxuICAgIGNvbnN0IGRlY29kZWQgPSBCdWZmZXIuZnJvbShlbmNvZGVkLCAnYmFzZTY0JykudG9TdHJpbmcoJ3V0Zi04Jyk7XHJcbiAgICBjb25zdCBbdXNlcm5hbWUsIHBhc3N3b3JkXSA9IGRlY29kZWQuc3BsaXQoJzonKTtcclxuXHJcbiAgICBpZiAodXNlcm5hbWUgPT09ICdhZG1pbicgJiYgcGFzc3dvcmQgPT09IGFkbWluUGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gbmV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ1dXVy1BdXRoZW50aWNhdGUnLCAnQmFzaWMgcmVhbG09XCJBZG1pbiBBcmVhXCInKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuc2VuZCgnQXV0aGVudGljYXRpb24gZmFpbGVkLicpO1xyXG59XHJcblxyXG5hcHAuZ2V0KCcvYWRtaW4nLCBjaGVja0FkbWluQXV0aCwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCBzcWwgPSAnU0VMRUNUICogRlJPTSByZWdpc3RyYXRpb25zIE9SREVSIEJZIHRpbWVfc2xvdCc7XHJcblxyXG4gICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIChlcnIsIHJlc3VsdHMpID0+IHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCgnRXJyb3IgcmV0cmlldmluZyByZWdpc3RyYXRpb25zLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIEhUTUwgdGFibGUgZm9yIHRoZSByZWdpc3RyYXRpb25zXHJcbiAgICAgICAgbGV0IGh0bWwgPSBgXHJcbiAgICAgICAgICAgIDxoMT5BZG1pbjogVmlldyBSZWdpc3RyYXRpb25zPC9oMT5cclxuICAgICAgICAgICAgPHRhYmxlIGJvcmRlcj1cIjFcIj5cclxuICAgICAgICAgICAgICAgIDx0cj5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+UmVnaXN0cmF0aW9uIE51bWJlcjwvdGg+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRoPkVtYWlsPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+VGltZSBTbG90PC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+TmFtZXM8L3RoPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aD5BZ2VzPC90aD5cclxuICAgICAgICAgICAgICAgICAgICA8dGg+QWN0aW9uPC90aD5cclxuICAgICAgICAgICAgICAgIDwvdHI+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgcmVzdWx0cy5mb3JFYWNoKHJlZ2lzdHJhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gYFxyXG4gICAgICAgICAgICAgICAgPHRyPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi5yZWdpc3RyYXRpb25fbnVtYmVyfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmVnaXN0cmF0aW9uLmVtYWlsfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPiR7cmVnaXN0cmF0aW9uLnRpbWVfc2xvdH08L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi5uYW1lc308L3RkPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0ZD4ke3JlZ2lzdHJhdGlvbi5hZ2VzfTwvdGQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPHRkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Zm9ybSBhY3Rpb249XCIvYWRtaW4vZGVsZXRlXCIgbWV0aG9kPVwiUE9TVFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwicmVnaXN0cmF0aW9uX251bWJlclwiIHZhbHVlPVwiJHtyZWdpc3RyYXRpb24ucmVnaXN0cmF0aW9uX251bWJlcn1cIiAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+UmVtb3ZlPC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZm9ybT5cclxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxyXG4gICAgICAgICAgICAgICAgPC90cj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaHRtbCArPSAnPC90YWJsZT4nO1xyXG4gICAgICAgIHJlcy5zZW5kKGh0bWwpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9yZWdpc3RlcicsIGFzeW5jIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyBlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwgfSA9IHJlcS5ib2R5O1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgc2VuZFJlZ2lzdHJhdGlvbkVtYWlsKGVtYWlsLCByZWdpc3RyYXRpb25OdW1iZXIsIHRpbWVTbG90LCBuYW1lcywgdmlld1VybCk7XHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQoJ1JlZ2lzdHJhdGlvbiBzdWNjZXNzZnVsLCBlbWFpbCBzZW50LicpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuc2VuZCgnUmVnaXN0cmF0aW9uIHN1Y2Nlc3NmdWwsIGJ1dCBlbWFpbCBmYWlsZWQuJyk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxuYXBwLnBvc3QoJy9hZG1pbi9kZWxldGUnLCBjaGVja0FkbWluQXV0aCwgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zdCByZWdpc3RyYXRpb25OdW1iZXIgPSByZXEuYm9keS5yZWdpc3RyYXRpb25fbnVtYmVyO1xyXG5cclxuICAgIC8vIFJldHJpZXZlIHRoZSByZWdpc3RyYXRpb24gZGV0YWlsc1xyXG4gICAgY29uc3Qgc3FsU2VsZWN0ID0gJ1NFTEVDVCAqIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyc7XHJcblxyXG4gICAgY29ubmVjdGlvbi5xdWVyeShzcWxTZWxlY3QsIFtyZWdpc3RyYXRpb25OdW1iZXJdLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVyciB8fCByZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoJ0Vycm9yIGZpbmRpbmcgdGhlIHJlZ2lzdHJhdGlvbi4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IHJlc3VsdHNbMF07XHJcbiAgICAgICAgY29uc3QgbnVtYmVyT2ZQZW9wbGUgPSByZWdpc3RyYXRpb24ubmFtZXMuc3BsaXQoJywgJykubGVuZ3RoOyAgLy8gU3BsaXQgYnkgY29tbWEgdG8gY291bnQgbmFtZXNcclxuXHJcbiAgICAgICAgLy8gRGVsZXRlIHRoZSByZWdpc3RyYXRpb24gZnJvbSB0aGUgZGF0YWJhc2VcclxuICAgICAgICBjb25zdCBzcWxEZWxldGUgPSAnREVMRVRFIEZST00gcmVnaXN0cmF0aW9ucyBXSEVSRSByZWdpc3RyYXRpb25fbnVtYmVyID0gPyc7XHJcbiAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWxEZWxldGUsIFtyZWdpc3RyYXRpb25OdW1iZXJdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXMuc2VuZCgnRXJyb3IgZGVsZXRpbmcgdGhlIHJlZ2lzdHJhdGlvbi4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gQWRkIGJhY2sgdGhlIG51bWJlciBvZiBzcG90cyB0byB0aGUgdGltZSBzbG90XHJcbiAgICAgICAgICAgIGNvbnN0IHNxbFVwZGF0ZVNwb3RzID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgKyA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgICAgICBjb25uZWN0aW9uLnF1ZXJ5KHNxbFVwZGF0ZVNwb3RzLCBbbnVtYmVyT2ZQZW9wbGUsIHJlZ2lzdHJhdGlvbi50aW1lX3Nsb3RdLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKCdFcnJvciB1cGRhdGluZyBzcG90cy4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXMucmVkaXJlY3QoJy9hZG1pbicpOyAgLy8gUmVmcmVzaCB0aGUgYWRtaW4gcGFnZSBhZnRlciBkZWxldGlvblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbi8vIFNlcnZlIHRoZSBsYW5kaW5nIGFuZCByZWdpc3RyYXRpb24gcGFnZXNcclxuYXBwLmdldCgnLycsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLnNlbmRGaWxlKF9fZGlybmFtZSArICcvcHVibGljL2luZGV4Lmh0bWwnKTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvcmVnaXN0ZXIuaHRtbCcsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgcmVzLnNlbmRGaWxlKF9fZGlybmFtZSArICcvcHVibGljL3JlZ2lzdGVyLmh0bWwnKTtcclxufSk7XHJcblxyXG5hcHAuZ2V0KCcvc3BvdHMnLCAocmVxLCByZXMpID0+IHtcclxuICAgIGNvbnN0IHNxbCA9ICdTRUxFQ1QgdGltZV9zbG90LCBzcG90c19yZW1haW5pbmcgRlJPTSB0aW1lX3Nsb3RzJztcclxuICAgIGNvbm5lY3Rpb24ucXVlcnkoc3FsLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIGZldGNoaW5nIGF2YWlsYWJsZSBzcG90cycgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlcy5qc29uKHJlc3VsdHMpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gSGFuZGxlIGZvcm0gc3VibWlzc2lvblxyXG5hcHAucG9zdCgnL3N1Ym1pdCcsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgY29uc3QgeyB0aW1lU2xvdCwgZW1haWwsIG5hbWVzLCBhZ2VzIH0gPSByZXEuYm9keTtcclxuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbk51bWJlciA9IGdlbmVyYXRlUmVnaXN0cmF0aW9uTnVtYmVyKCk7XHJcblxyXG4gICAgLy8gU3RlcCAxOiBDaGVjayB0aGUgcmVtYWluaW5nIHNwb3RzIGZyb20gdGhlIGRhdGFiYXNlXHJcbiAgICBjb25zdCBjaGVja1Nwb3RzU3FsID0gJ1NFTEVDVCBzcG90c19yZW1haW5pbmcgRlJPTSB0aW1lX3Nsb3RzIFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgY29ubmVjdGlvbi5xdWVyeShjaGVja1Nwb3RzU3FsLCBbdGltZVNsb3RdLCAoZXJyLCByZXN1bHRzKSA9PiB7XHJcbiAgICAgICAgaWYgKGVyciB8fCByZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjaGVja2luZyBzcG90czonLCBlcnIpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgPGhlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgIDwvaGVhZD5cclxuICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gRmFpbGVkPC9oMT5cclxuICAgICAgICAgICAgICAgIDxwPkNvdWxkIG5vdCByZXRyaWV2ZSBhdmFpbGFibGUgc3BvdHMuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzcG90c1JlbWFpbmluZyA9IHJlc3VsdHNbMF0uc3BvdHNfcmVtYWluaW5nO1xyXG5cclxuICAgICAgICAvLyBTdGVwIDI6IENoZWNrIGlmIHRoZXJlIGFyZSBlbm91Z2ggc3BvdHNcclxuICAgICAgICBpZiAoc3BvdHNSZW1haW5pbmcgPCBuYW1lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICA8cD5Tb3JyeSwgdGhlcmUgYXJlbid0IGVub3VnaCBzcG90cyBsZWZ0IGZvciB0aGUgc2VsZWN0ZWQgdGltZSBzbG90ICgke3RpbWVTbG90fSkuPC9wPlxyXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjayBhbmQgdHJ5IGFub3RoZXIgc2xvdDwvYT5cclxuICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBTdGVwIDM6IERlZHVjdCB0aGUgbnVtYmVyIG9mIHJlZ2lzdGVyZWQgcGVvcGxlIGZyb20gdGhlIGF2YWlsYWJsZSBzcG90c1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZVNwb3RzU3FsID0gJ1VQREFURSB0aW1lX3Nsb3RzIFNFVCBzcG90c19yZW1haW5pbmcgPSBzcG90c19yZW1haW5pbmcgLSA/IFdIRVJFIHRpbWVfc2xvdCA9ID8nO1xyXG4gICAgICAgIGNvbm5lY3Rpb24ucXVlcnkodXBkYXRlU3BvdHNTcWwsIFtuYW1lcy5sZW5ndGgsIHRpbWVTbG90XSwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBzcG90czonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zZW5kKGBcclxuICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmsgcmVsPVwic3R5bGVzaGVldFwiIGhyZWY9XCIvc3Bvb2t5LXRoZW1lLmNzc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+UmVnaXN0cmF0aW9uIEZhaWxlZDwvdGl0bGU+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgIDxoMT5SZWdpc3RyYXRpb24gRmFpbGVkPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8cD5Db3VsZCBub3QgdXBkYXRlIGF2YWlsYWJsZSBzcG90cy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci48L3A+XHJcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cIi9yZWdpc3Rlci5odG1sXCI+R28gYmFjazwvYT5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTdGVwIDQ6IFNhdmUgcmVnaXN0cmF0aW9uIHRvIHRoZSBNeVNRTCBkYXRhYmFzZVxyXG4gICAgICAgICAgICBjb25zdCBzcWwgPSBgXHJcbiAgICAgICAgICAgICAgICBJTlNFUlQgSU5UTyByZWdpc3RyYXRpb25zIChyZWdpc3RyYXRpb25fbnVtYmVyLCBlbWFpbCwgdGltZV9zbG90LCBuYW1lcywgYWdlcylcclxuICAgICAgICAgICAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPylcclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgY29uc3QgbmFtZXNTdHJpbmcgPSBuYW1lcy5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBjb25zdCBhZ2VzU3RyaW5nID0gYWdlcy5qb2luKCcsICcpO1xyXG5cclxuICAgICAgICAgICAgY29ubmVjdGlvbi5xdWVyeShzcWwsIFtyZWdpc3RyYXRpb25OdW1iZXIsIGVtYWlsLCB0aW1lU2xvdCwgbmFtZXNTdHJpbmcsIGFnZXNTdHJpbmddLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2UgZXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aGVhZD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiL3Nwb29reS10aGVtZS5jc3NcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5SZWdpc3RyYXRpb24gRmFpbGVkPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9oZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+UmVnaXN0cmF0aW9uIEZhaWxlZDwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPlRoZXJlIHdhcyBhbiBpc3N1ZSBzYXZpbmcgeW91ciByZWdpc3RyYXRpb24uIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVwiL3JlZ2lzdGVyLmh0bWxcIj5HbyBiYWNrPC9hPlxyXG4gICAgICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vU2VuZCBlbWFpbFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgdmlld1VybCA9IGBodHRwczovL3lvdXItZG9tYWluLmNvbS92aWV3LXJlZ2lzdHJhdGlvbj9udW1iZXI9JHtyZWdpc3RyYXRpb25OdW1iZXJ9YDtcclxuICAgICAgICAgICAgICAgIHNlbmRSZWdpc3RyYXRpb25FbWFpbChlbWFpbCwgcmVnaXN0cmF0aW9uTnVtYmVyLCB0aW1lU2xvdCwgbmFtZXMsIHZpZXdVcmwpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJldHVybiBhIGNvbmZpcm1hdGlvblxyXG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoYFxyXG4gICAgICAgICAgICAgICAgICAgIDxoZWFkPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIi9zcG9va3ktdGhlbWUuY3NzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5UaGFuayB5b3UhPC90aXRsZT5cclxuICAgICAgICAgICAgICAgICAgICA8L2hlYWQ+XHJcbiAgICAgICAgICAgICAgICAgICAgPGgxPlRoYW5rIHlvdSBmb3IgcmVnaXN0ZXJpbmchPC9oMT5cclxuICAgICAgICAgICAgICAgICAgICA8cD5Zb3UgaGF2ZSByZWdpc3RlcmVkICR7bmFtZXMubGVuZ3RofSBwZXJzb24ocykgZm9yIHRoZSAke3RpbWVTbG90fSB0aW1lIHNsb3QuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwPllvdXIgcmVnaXN0cmF0aW9uIG51bWJlciBpcyA8c3Ryb25nPiR7cmVnaXN0cmF0aW9uTnVtYmVyfTwvc3Ryb25nPi4gUGxlYXNlIGtlZXAgdGhpcyBudW1iZXIgZm9yIGZ1dHVyZSByZWZlcmVuY2UuPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvXCI+R28gYmFjayB0byB0aGUgaG9tZSBwYWdlPC9hPlxyXG4gICAgICAgICAgICAgICAgYCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuLy8gU3RhcnQgc2VydmVyXHJcbmNvbnN0IFBPUlQgPSBwcm9jZXNzLmVudi5QT1JUIHx8IDMwMDA7XHJcbmFwcC5saXN0ZW4oUE9SVCwgKCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFNlcnZlciBydW5uaW5nIG9uIHBvcnQgJHtQT1JUfWApO1xyXG59KTtcclxuIl0sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNQyxVQUFVLEdBQUdELE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDekMsTUFBTUUsS0FBSyxHQUFHRixPQUFPLENBQUMsUUFBUSxDQUFDO0FBQy9CLE1BQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUU7QUFDbkMsTUFBTUksVUFBVSxHQUFHSixPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ3hDLE1BQU1LLE1BQU0sR0FBR0wsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxNQUFNTSxJQUFJLEdBQUdOLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDNUIsTUFBTU8sR0FBRyxHQUFHUixPQUFPLENBQUMsQ0FBQztBQUVyQlEsR0FBRyxDQUFDQyxHQUFHLENBQUNQLFVBQVUsQ0FBQ1EsVUFBVSxDQUFDO0VBQUVDLFFBQVEsRUFBRTtBQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ2xESCxHQUFHLENBQUNDLEdBQUcsQ0FBQ1QsT0FBTyxDQUFDWSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDakNKLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDVCxPQUFPLENBQUNhLElBQUksQ0FBQyxDQUFDLENBQUM7O0FBRXZCO0FBQ0Es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","map":{"version":3,"names":["express","require","bodyParser","mysql","crypto","nodemailer","QRCode","path","app","use","urlencoded","extended","static","json","connection","createConnection","host","port","user","password","database","connect","err","console","error","stack","log","query","results","solution","transporter","createTransport","secure","auth","pass","tls","rejectUnauthorized","sendRegistrationEmail","email","registrationNumber","timeSlot","names","viewUrl","qrCodeURL","generateQRCode","qrCodeData","qrCodeBuffer","toBuffer","emailContent","join","mailOptions","from","to","subject","html","attachments","filename","content","cid","sendMail","info","response","toDataURL","availableSlots","generateRegistrationNumber","now","Date","day","String","getDate","padStart","month","getMonth","year","getFullYear","slice","randomFourDigits","Math","floor","random","post","req","res","registration_number","body","sql","length","send","registration","namesArray","split","agesArray","ages","registrationDetails","time_slot","forEach","name","index","sqlFind","existingRegistrantCount","sqlDelete","sqlUpdateSpots","newRegistrantCount","difference","namesString","agesString","sqlUpdate","adminPassword","checkAdminAuth","next","headers","setHeader","status","encoded","decoded","Buffer","toString","username","get","sqlSelect","numberOfPeople","redirect","sendFile","__dirname","checkSpotsSql","spotsRemaining","spots_remaining","updateSpotsSql","PORT","process","env","listen"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["server.js"],"sourcesContent":["const express = require('express');\r\nconst bodyParser = require('body-parser');\r\nconst mysql = require('mysql2');\r\nconst crypto = require('crypto');  // For generating registration numbers\r\nconst nodemailer = require('nodemailer');\r\nconst QRCode = require('qrcode');\r\nconst path = require('path');\r\nconst app = express();\r\n\r\napp.use(bodyParser.urlencoded({ extended: true }));\r\napp.use(express.static('public'));\r\napp.use(express.json());\r\n\r\n// MySQL connection setup\r\nconst connection = mysql.createConnection({\r\n    host: '100.87.150.78',  // 192.168.100.100\r\n    port: '3667',\r\n    user: 'valak',\r\n    password: 'SLEEP4tG',\r\n    database: 'MYSQL_DATABASE'\r\n});\r\n\r\nconnection.connect((err) => {\r\n    if (err) {\r\n        console.error('Error connecting to MySQL:', err.stack);\r\n        return;\r\n    }\r\n    console.log('Connected to MySQL');\r\n});\r\n\r\nconnection.query('SELECT 1 + 1 AS solution', (err, results) => {\r\n    if (err) {\r\n        console.error('Error querying MySQL:', err.stack);\r\n    } else {\r\n        console.log('Test query successful, solution:', results[0].solution);\r\n    }\r\n});\r\n\r\nconst transporter = nodemailer.createTransport({\r\n    host: 'smtp.office365.com',\r\n    port: 587,\r\n    secure: false, // Use TLS\r\n    auth: {\r\n        user: 'donotreply@hauntbrunswick.com', // Your Office 365 email\r\n        pass: 'vsjwbdbfhvqrvyqw' // Your Office 365 app password\r\n    },\r\n    tls: {\r\n        rejectUnauthorized: false // This might help if there's an issue with the certificate\r\n    }\r\n});\r\n\r\nasync function sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl) {\r\n    // Generate the QR code\r\n    const qrCodeURL = await generateQRCode(registrationNumber, email);\r\n    const qrCodeData = `${registrationNumber}:${email}`;\r\n    const qrCodeBuffer = await QRCode.toBuffer(qrCodeData);\r\n    console.log(qrCodeURL);\r\n\r\n    // Email content with the embedded QR code\r\n    const emailContent = `\r\n        <h1>Thank you for registering!</h1>\r\n        <p>You have registered for the following time slot on <strong>Sunday, October 27th</strong>:</p>\r\n        <p>Time Slot: ${timeSlot}</p>\r\n        <p>Names of attendees: ${names.join(', ')}</p>\r\n        <p>You can view your registration details at <a href=\"${viewUrl}\">this link</a>.</p>\r\n        <p>Use the QR code below when checking in:</p>\r\n        <img src=\"cid:qrCode\" alt=\"QR Code\" />\r\n    `;\r\n\r\n    // Use Nodemailer to send the email (you likely have this setup already)\r\n    const mailOptions = {\r\n        from: 'donotreply@hauntbrunswick.com',\r\n        to: email,\r\n        subject: 'Your Haunted House Registration Confirmation',\r\n        html: emailContent,\r\n        attachments: [{\r\n          filename: 'qrcode.png',\r\n          content: qrCodeBuffer,\r\n          cid: 'qrCode'  // Same CID as in the email content\r\n        }]\r\n    };\r\n\r\n    // Send the email\r\n    transporter.sendMail(mailOptions, (error, info) => {\r\n        if (error) {\r\n            console.error('Error sending email:', error);\r\n        } else {\r\n            console.log('Email sent: ' + info.response);\r\n        }\r\n    });\r\n}\r\n\r\nasync function generateQRCode(registrationNumber, email) {\r\n  try {\r\n    const qrCodeData = `${registrationNumber}:${email}`; // The data you want to encode in the QR code\r\n    const qrCodeURL = await QRCode.toDataURL(qrCodeData); // Generates a base64 image URL\r\n    return qrCodeURL;\r\n  } catch (err) {\r\n    console.error('Failed to generate QR Code', err);\r\n    throw err;\r\n  }\r\n}\r\n\r\n// In-memory storage of available spots (this could also be in the database)\r\nlet availableSlots = {\r\n    '6:00 PM': 20,\r\n    '6:15 PM': 20,\r\n    '6:30 PM': 20,\r\n    '6:45 PM': 20,\r\n    '7:00 PM': 20,\r\n    '7:15 PM': 20,\r\n    '7:30 PM': 20,\r\n    '7:45 PM': 20,\r\n    '8:00 PM': 20,\r\n    '8:15 PM': 20,\r\n    '8:30 PM': 20,\r\n    '8:45 PM': 20\r\n};\r\n\r\nfunction generateRegistrationNumber() {\r\n    const now = new Date();\r\n    const day = String(now.getDate()).padStart(2, '0');      // DD\r\n    const month = String(now.getMonth() + 1).padStart(2, '0'); // MM\r\n    const year = String(now.getFullYear()).slice(-2);        // YY\r\n    const randomFourDigits = Math.floor(1000 + Math.random() * 9000);\r\n    return `LC-${day}${month}${year}-${randomFourDigits}`;\r\n}\r\n\r\n//View registration\r\napp.post('/view-registration', (req, res) => {\r\n    const { registration_number, email } = req.body;\r\n\r\n    // Query to find the registration based on registration number and email\r\n    const sql = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sql, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const namesArray = registration.names.split(', ');\r\n        const agesArray = registration.ages.split(', ');\r\n\r\n        let registrationDetails = `\r\n            <head>\r\n                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                <title>Modify Registration</title>\r\n            </head>\r\n            <h2>Registration Details</h2>\r\n            <p>Registration Number: ${registration.registration_number}</p>\r\n            <p>Email: ${registration.email}</p>\r\n            <p>Time Slot: ${registration.time_slot}</p>\r\n            <form id=\"modify-form\" action=\"/modify-registration\" method=\"POST\">\r\n                <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\">\r\n                <input type=\"hidden\" name=\"email\" value=\"${registration.email}\">\r\n        `;\r\n\r\n        // Generate attendee fields for modification\r\n        namesArray.forEach((name, index) => {\r\n            registrationDetails += `\r\n                <div class=\"attendee\" id=\"attendee-${index + 1}\">\r\n                    <label for=\"name${index + 1}\">Name:</label>\r\n                    <input type=\"text\" id=\"name${index + 1}\" name=\"names[]\" value=\"${name}\" required>\r\n                    <label for=\"age${index + 1}\">Age:</label>\r\n                    <select id=\"age${index + 1}\" name=\"ages[]\" required>\r\n                        <option value=\"16-20\" ${agesArray[index] === '16-20' ? 'selected' : ''}>16-20</option>\r\n                        <option value=\"21-30\" ${agesArray[index] === '21-30' ? 'selected' : ''}>21-30</option>\r\n                        <option value=\"31-40\" ${agesArray[index] === '31-40' ? 'selected' : ''}>31-40</option>\r\n                        <option value=\"41-50\" ${agesArray[index] === '41-50' ? 'selected' : ''}>41-50</option>\r\n                        <option value=\"51+\" ${agesArray[index] === '51+' ? 'selected' : ''}>51+</option>\r\n                    </select>\r\n                    <button type=\"button\" onclick=\"removeAttendee(${index + 1})\">Remove</button>\r\n                </div>\r\n            `;\r\n        });\r\n\r\n        // Add \"Remove All\" button and submit button\r\n        registrationDetails += `\r\n                <button type=\"button\" onclick=\"confirmRemoveAll()\">Remove All</button>\r\n                <button class=\"button\" type=\"submit\">Submit Changes</button>\r\n            </form>\r\n\r\n            <script>\r\n                // Function to remove individual attendees\r\n                function removeAttendee(index) {\r\n                    const attendeeElement = document.getElementById('attendee-' + index);\r\n                    attendeeElement.remove();\r\n                }\r\n\r\n                // Function to confirm removing all attendees\r\n                function confirmRemoveAll() {\r\n                    const attendeeElements = document.querySelectorAll('.attendee');\r\n\r\n                    if (attendeeElements.length === 0) {\r\n                        alert(\"No registrants to remove.\");\r\n                        return;\r\n                    }\r\n\r\n                    const confirmed = confirm(\"Are you sure you want to remove all registrants?\");\r\n                    if (confirmed) {\r\n                        attendeeElements.forEach(attendee => attendee.remove());\r\n                    }\r\n                }\r\n            </script>\r\n        `;\r\n\r\n        // Return the registration details to the user\r\n        res.send(registrationDetails);\r\n    });\r\n});\r\n\r\napp.post('/modify-registration', (req, res) => {\r\n    const { registration_number, email, names, ages } = req.body;\r\n\r\n    // Query to find the existing registration before making changes\r\n    const sqlFind = 'SELECT * FROM registrations WHERE registration_number = ? AND email = ?';\r\n    connection.query(sqlFind, [registration_number, email], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>No Registration Found</title>\r\n                </head>\r\n                <h1>No Registration Found</h1>\r\n                <p>We couldn't find a registration with that number and email.</p>\r\n                <a href=\"/view.html\">Try again</a>\r\n            `);\r\n        }\r\n\r\n        const registration = results[0];\r\n        const existingRegistrantCount = registration.names ? registration.names.split(', ').length : 0;\r\n\r\n        // If 'names' array is undefined or empty, delete the registration and add spots back to the time slot\r\n        if (!names || names.length === 0) {\r\n            const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ? AND email = ?';\r\n            connection.query(sqlDelete, [registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Removal Failed</title>\r\n                        </head>\r\n                        <h1>Error</h1>\r\n                        <p>There was an issue removing your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Add back all spots when registration is removed\r\n                const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                connection.query(sqlUpdateSpots, [existingRegistrantCount, registration.time_slot], (err) => {\r\n                    if (err) {\r\n                        return res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Error Updating</title>\r\n                            </head>\r\n                            <h1>Error Updating Spots</h1>\r\n                            <p>There was an issue updating the available spots for the time slot.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    }\r\n\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Removed</title>\r\n                        </head>\r\n                        <h1>Registration Removed</h1>\r\n                        <p>Your registration has been successfully removed.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                });\r\n            });\r\n        } else {\r\n            // Calculate the difference in registrant count (if any registrants were added or removed)\r\n            const newRegistrantCount = names.length;\r\n            const difference = existingRegistrantCount - newRegistrantCount;\r\n\r\n            // Safeguard for undefined names or ages when joining\r\n            const namesString = names && names.length ? names.join(', ') : '';\r\n            const agesString = ages && ages.length ? ages.join(', ') : '';\r\n\r\n            const sqlUpdate = `\r\n                UPDATE registrations\r\n                SET names = ?, ages = ?\r\n                WHERE registration_number = ? AND email = ?\r\n            `;\r\n\r\n            connection.query(sqlUpdate, [namesString, agesString, registration_number, email], (err) => {\r\n                if (err) {\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Update Failed</title>\r\n                        </head>\r\n                        <h1>Update Failed</h1>\r\n                        <p>There was an issue updating your registration. Please try again later.</p>\r\n                        <a href=\"/view.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                // Update spots remaining based on the difference in registrants\r\n                if (difference !== 0) {\r\n                    const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n                    connection.query(sqlUpdateSpots, [difference, registration.time_slot], (err) => {\r\n                        if (err) {\r\n                            return res.send(`\r\n                                <head>\r\n                                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                    <title>Update Failed</title>\r\n                                </head>\r\n                                <h1>Error Updating Spots</h1>\r\n                                <p>There was an issue updating the available spots for the time slot.</p>\r\n                                <a href=\"/\">Go back to the home page</a>\r\n                            `);\r\n                        }\r\n\r\n                        res.send(`\r\n                            <head>\r\n                                <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                                <title>Registration Updated</title>\r\n                            </head>\r\n                            <h1>Registration Updated</h1>\r\n                            <p>Your registration has been successfully updated.</p>\r\n                            <a href=\"/\">Go back to the home page</a>\r\n                        `);\r\n                    });\r\n                } else {\r\n                    res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Updated</title>\r\n                        </head>\r\n                        <h1>Registration Updated</h1>\r\n                        <p>Your registration has been successfully updated.</p>\r\n                        <a href=\"/\">Go back to the home page</a>\r\n                    `);\r\n                }\r\n            });\r\n        }\r\n    });\r\n});\r\n\r\n//ADMIN page\r\nconst adminPassword = 'SLEEP4tG';  // Replace with your actual password\r\n\r\n// Middleware to protect the admin route\r\nfunction checkAdminAuth(req, res, next) {\r\n    const auth = req.headers['authorization'];\r\n\r\n    if (!auth) {\r\n        res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n        return res.status(401).send('Authentication required.');\r\n    }\r\n\r\n    const encoded = auth.split(' ')[1];\r\n    const decoded = Buffer.from(encoded, 'base64').toString('utf-8');\r\n    const [username, password] = decoded.split(':');\r\n\r\n    if (username === 'admin' && password === adminPassword) {\r\n        return next();\r\n    }\r\n\r\n    res.setHeader('WWW-Authenticate', 'Basic realm=\"Admin Area\"');\r\n    return res.status(401).send('Authentication failed.');\r\n}\r\n\r\napp.get('/admin', checkAdminAuth, (req, res) => {\r\n    const sql = 'SELECT * FROM registrations ORDER BY time_slot';\r\n\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.send('Error retrieving registrations.');\r\n        }\r\n\r\n        // Create HTML table for the registrations\r\n        let html = `\r\n            <h1>Admin: View Registrations</h1>\r\n            <table border=\"1\">\r\n                <tr>\r\n                    <th>Registration Number</th>\r\n                    <th>Email</th>\r\n                    <th>Time Slot</th>\r\n                    <th>Names</th>\r\n                    <th>Ages</th>\r\n                    <th>Action</th>\r\n                </tr>\r\n        `;\r\n\r\n        results.forEach(registration => {\r\n            html += `\r\n                <tr>\r\n                    <td>${registration.registration_number}</td>\r\n                    <td>${registration.email}</td>\r\n                    <td>${registration.time_slot}</td>\r\n                    <td>${registration.names}</td>\r\n                    <td>${registration.ages}</td>\r\n                    <td>\r\n                        <form action=\"/admin/delete\" method=\"POST\">\r\n                            <input type=\"hidden\" name=\"registration_number\" value=\"${registration.registration_number}\" />\r\n                            <button type=\"submit\">Remove</button>\r\n                        </form>\r\n                    </td>\r\n                </tr>\r\n            `;\r\n        });\r\n\r\n        html += '</table>';\r\n        res.send(html);\r\n    });\r\n});\r\n\r\napp.post('/register', async (req, res) => {\r\n    const { email, registrationNumber, timeSlot, names, viewUrl } = req.body;\r\n\r\n    try {\r\n        await sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n        res.status(200).send('Registration successful, email sent.');\r\n    } catch (error) {\r\n        res.status(500).send('Registration successful, but email failed.');\r\n    }\r\n});\r\n\r\napp.post('/admin/delete', checkAdminAuth, (req, res) => {\r\n    const registrationNumber = req.body.registration_number;\r\n\r\n    // Retrieve the registration details\r\n    const sqlSelect = 'SELECT * FROM registrations WHERE registration_number = ?';\r\n\r\n    connection.query(sqlSelect, [registrationNumber], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            return res.send('Error finding the registration.');\r\n        }\r\n\r\n        const registration = results[0];\r\n        const numberOfPeople = registration.names.split(', ').length;  // Split by comma to count names\r\n\r\n        // Delete the registration from the database\r\n        const sqlDelete = 'DELETE FROM registrations WHERE registration_number = ?';\r\n        connection.query(sqlDelete, [registrationNumber], (err) => {\r\n            if (err) {\r\n                return res.send('Error deleting the registration.');\r\n            }\r\n\r\n            // Add back the number of spots to the time slot\r\n            const sqlUpdateSpots = 'UPDATE time_slots SET spots_remaining = spots_remaining + ? WHERE time_slot = ?';\r\n            connection.query(sqlUpdateSpots, [numberOfPeople, registration.time_slot], (err) => {\r\n                if (err) {\r\n                    return res.send('Error updating spots.');\r\n                }\r\n\r\n                res.redirect('/admin');  // Refresh the admin page after deletion\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Serve the landing and registration pages\r\napp.get('/', (req, res) => {\r\n    res.sendFile(__dirname + '/public/index.html');\r\n});\r\n\r\napp.get('/register.html', (req, res) => {\r\n    res.sendFile(__dirname + '/public/register.html');\r\n});\r\n\r\napp.get('/spots', (req, res) => {\r\n    const sql = 'SELECT time_slot, spots_remaining FROM time_slots';\r\n    connection.query(sql, (err, results) => {\r\n        if (err) {\r\n            return res.status(500).json({ error: 'Error fetching available spots' });\r\n        }\r\n        res.json(results);\r\n    });\r\n});\r\n\r\n// Handle form submission\r\napp.post('/submit', (req, res) => {\r\n    const { timeSlot, email, names, ages } = req.body;\r\n    const registrationNumber = generateRegistrationNumber();\r\n\r\n    // Step 1: Check the remaining spots from the database\r\n    const checkSpotsSql = 'SELECT spots_remaining FROM time_slots WHERE time_slot = ?';\r\n    connection.query(checkSpotsSql, [timeSlot], (err, results) => {\r\n        if (err || results.length === 0) {\r\n            console.error('Error checking spots:', err);\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Could not retrieve available spots. Please try again later.</p>\r\n                <a href=\"/register.html\">Go back</a>\r\n            `);\r\n        }\r\n\r\n        const spotsRemaining = results[0].spots_remaining;\r\n\r\n        // Step 2: Check if there are enough spots\r\n        if (spotsRemaining < names.length) {\r\n            return res.send(`\r\n                <head>\r\n                    <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                    <title>Registration Failed</title>\r\n                </head>\r\n                <h1>Registration Failed</h1>\r\n                <p>Sorry, there aren't enough spots left for the selected time slot (${timeSlot}).</p>\r\n                <a href=\"/register.html\">Go back and try another slot</a>\r\n            `);\r\n        }\r\n\r\n        // Step 3: Deduct the number of registered people from the available spots\r\n        const updateSpotsSql = 'UPDATE time_slots SET spots_remaining = spots_remaining - ? WHERE time_slot = ?';\r\n        connection.query(updateSpotsSql, [names.length, timeSlot], (err) => {\r\n            if (err) {\r\n                console.error('Error updating spots:', err);\r\n                return res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Registration Failed</title>\r\n                    </head>\r\n                    <h1>Registration Failed</h1>\r\n                    <p>Could not update available spots. Please try again later.</p>\r\n                    <a href=\"/register.html\">Go back</a>\r\n                `);\r\n            }\r\n\r\n            // Step 4: Save registration to the MySQL database\r\n            const sql = `\r\n                INSERT INTO registrations (registration_number, email, time_slot, names, ages)\r\n                VALUES (?, ?, ?, ?, ?)\r\n            `;\r\n            const namesString = names.join(', ');\r\n            const agesString = ages.join(', ');\r\n\r\n            connection.query(sql, [registrationNumber, email, timeSlot, namesString, agesString], (err) => {\r\n                if (err) {\r\n                    console.error('Database error:', err);\r\n                    return res.send(`\r\n                        <head>\r\n                            <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                            <title>Registration Failed</title>\r\n                        </head>\r\n                        <h1>Registration Failed</h1>\r\n                        <p>There was an issue saving your registration. Please try again later.</p>\r\n                        <a href=\"/register.html\">Go back</a>\r\n                    `);\r\n                }\r\n\r\n                //Send email\r\n                const viewUrl = `https://your-domain.com/view-registration?number=${registrationNumber}`;\r\n                sendRegistrationEmail(email, registrationNumber, timeSlot, names, viewUrl);\r\n\r\n                // Return a confirmation\r\n                res.send(`\r\n                    <head>\r\n                        <link rel=\"stylesheet\" href=\"/spooky-theme.css\">\r\n                        <title>Thank you!</title>\r\n                    </head>\r\n                    <h1>Thank you for registering!</h1>\r\n                    <p>You have registered ${names.length} person(s) for the ${timeSlot} time slot.</p>\r\n                    <p>Your registration number is <strong>${registrationNumber}</strong>. Please keep this number for future reference.</p>\r\n                    <a href=\"/\">Go back to the home page</a>\r\n                `);\r\n            });\r\n        });\r\n    });\r\n});\r\n\r\n// Start server\r\nconst PORT = process.env.PORT || 3000;\r\napp.listen(PORT, () => {\r\n    console.log(`Server running on port ${PORT}`);\r\n});\r\n"],"mappings":"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"}},"mtime":1727028051393},"{\"assumptions\":{},\"sourceRoot\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"configFile\":false,\"cwd\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"filename\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\\\\TESTEMAIL.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"production\",\"root\":\"C:\\\\Users\\\\Andrew\\\\Documents\\\\Projects\\\\HH 24'\\\\hauntbrunswick.com\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.22.1:production":{"value":{"code":"\"use strict\";\n\nconst nodemailer = require('nodemailer');\nconst transporter = nodemailer.createTransport({\n  host: 'smtp.office365.com',\n  port: 587,\n  secure: false,\n  // Use TLS\n  auth: {\n    user: 'donotreply@hauntbrunswick.com',\n    pass: 'vsjwbdbfhvqrvyqw'\n  },\n  tls: {\n    rejectUnauthorized: false\n  }\n});\nconst mailOptions = {\n  from: 'donotreply@hauntbrunswick.com',\n  to: '696969ik@gmail.com',\n  subject: 'Test Email',\n  text: 'This is a test email to verify the app password.'\n};\ntransporter.sendMail(mailOptions, (error, info) => {\n  if (error) {\n    console.error('Error sending email:', error);\n  } else {\n    console.log('Email sent:', info.response);\n  }\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJub2RlbWFpbGVyIiwicmVxdWlyZSIsInRyYW5zcG9ydGVyIiwiY3JlYXRlVHJhbnNwb3J0IiwiaG9zdCIsInBvcnQiLCJzZWN1cmUiLCJhdXRoIiwidXNlciIsInBhc3MiLCJ0bHMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJtYWlsT3B0aW9ucyIsImZyb20iLCJ0byIsInN1YmplY3QiLCJ0ZXh0Iiwic2VuZE1haWwiLCJlcnJvciIsImluZm8iLCJjb25zb2xlIiwibG9nIiwicmVzcG9uc2UiXSwic291cmNlUm9vdCI6IkM6XFxVc2Vyc1xcQW5kcmV3XFxEb2N1bWVudHNcXFByb2plY3RzXFxISCAyNCdcXGhhdW50YnJ1bnN3aWNrLmNvbVxcIiwic291cmNlcyI6WyJURVNURU1BSUwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgbm9kZW1haWxlciA9IHJlcXVpcmUoJ25vZGVtYWlsZXInKTtcclxuXHJcbmNvbnN0IHRyYW5zcG9ydGVyID0gbm9kZW1haWxlci5jcmVhdGVUcmFuc3BvcnQoe1xyXG4gIGhvc3Q6ICdzbXRwLm9mZmljZTM2NS5jb20nLFxyXG4gIHBvcnQ6IDU4NyxcclxuICBzZWN1cmU6IGZhbHNlLCAvLyBVc2UgVExTXHJcbiAgYXV0aDoge1xyXG4gICAgdXNlcjogJ2Rvbm90cmVwbHlAaGF1bnRicnVuc3dpY2suY29tJyxcclxuICAgIHBhc3M6ICd2c2p3YmRiZmh2cXJ2eXF3J1xyXG4gIH0sXHJcbiAgdGxzOiB7XHJcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IG1haWxPcHRpb25zID0ge1xyXG4gIGZyb206ICdkb25vdHJlcGx5QGhhdW50YnJ1bnN3aWNrLmNvbScsXHJcbiAgdG86ICc2OTY5Njlpa0BnbWFpbC5jb20nLFxyXG4gIHN1YmplY3Q6ICdUZXN0IEVtYWlsJyxcclxuICB0ZXh0OiAnVGhpcyBpcyBhIHRlc3QgZW1haWwgdG8gdmVyaWZ5IHRoZSBhcHAgcGFzc3dvcmQuJ1xyXG59O1xyXG5cclxudHJhbnNwb3J0ZXIuc2VuZE1haWwobWFpbE9wdGlvbnMsIChlcnJvciwgaW5mbykgPT4ge1xyXG4gIGlmIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VuZGluZyBlbWFpbDonLCBlcnJvcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdFbWFpbCBzZW50OicsIGluZm8ucmVzcG9uc2UpO1xyXG4gIH1cclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxVQUFVLEdBQUdDLE9BQU8sQ0FBQyxZQUFZLENBQUM7QUFFeEMsTUFBTUMsV0FBVyxHQUFHRixVQUFVLENBQUNHLGVBQWUsQ0FBQztFQUM3Q0MsSUFBSSxFQUFFLG9CQUFvQjtFQUMxQkMsSUFBSSxFQUFFLEdBQUc7RUFDVEMsTUFBTSxFQUFFLEtBQUs7RUFBRTtFQUNmQyxJQUFJLEVBQUU7SUFDSkMsSUFBSSxFQUFFLCtCQUErQjtJQUNyQ0MsSUFBSSxFQUFFO0VBQ1IsQ0FBQztFQUNEQyxHQUFHLEVBQUU7SUFDSEMsa0JBQWtCLEVBQUU7RUFDdEI7QUFDRixDQUFDLENBQUM7QUFFRixNQUFNQyxXQUFXLEdBQUc7RUFDbEJDLElBQUksRUFBRSwrQkFBK0I7RUFDckNDLEVBQUUsRUFBRSxvQkFBb0I7RUFDeEJDLE9BQU8sRUFBRSxZQUFZO0VBQ3JCQyxJQUFJLEVBQUU7QUFDUixDQUFDO0FBRURkLFdBQVcsQ0FBQ2UsUUFBUSxDQUFDTCxXQUFXLEVBQUUsQ0FBQ00sS0FBSyxFQUFFQyxJQUFJLEtBQUs7RUFDakQsSUFBSUQsS0FBSyxFQUFFO0lBQ1RFLE9BQU8sQ0FBQ0YsS0FBSyxDQUFDLHNCQUFzQixFQUFFQSxLQUFLLENBQUM7RUFDOUMsQ0FBQyxNQUFNO0lBQ0xFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGFBQWEsRUFBRUYsSUFBSSxDQUFDRyxRQUFRLENBQUM7RUFDM0M7QUFDRixDQUFDLENBQUMifQ==","map":{"version":3,"names":["nodemailer","require","transporter","createTransport","host","port","secure","auth","user","pass","tls","rejectUnauthorized","mailOptions","from","to","subject","text","sendMail","error","info","console","log","response"],"sourceRoot":"C:\\Users\\Andrew\\Documents\\Projects\\HH 24'\\hauntbrunswick.com\\","sources":["TESTEMAIL.js"],"sourcesContent":["const nodemailer = require('nodemailer');\r\n\r\nconst transporter = nodemailer.createTransport({\r\n  host: 'smtp.office365.com',\r\n  port: 587,\r\n  secure: false, // Use TLS\r\n  auth: {\r\n    user: 'donotreply@hauntbrunswick.com',\r\n    pass: 'vsjwbdbfhvqrvyqw'\r\n  },\r\n  tls: {\r\n    rejectUnauthorized: false\r\n  }\r\n});\r\n\r\nconst mailOptions = {\r\n  from: 'donotreply@hauntbrunswick.com',\r\n  to: '696969ik@gmail.com',\r\n  subject: 'Test Email',\r\n  text: 'This is a test email to verify the app password.'\r\n};\r\n\r\ntransporter.sendMail(mailOptions, (error, info) => {\r\n  if (error) {\r\n    console.error('Error sending email:', error);\r\n  } else {\r\n    console.log('Email sent:', info.response);\r\n  }\r\n});\r\n"],"mappings":";;AAAA,MAAMA,UAAU,GAAGC,OAAO,CAAC,YAAY,CAAC;AAExC,MAAMC,WAAW,GAAGF,UAAU,CAACG,eAAe,CAAC;EAC7CC,IAAI,EAAE,oBAAoB;EAC1BC,IAAI,EAAE,GAAG;EACTC,MAAM,EAAE,KAAK;EAAE;EACfC,IAAI,EAAE;IACJC,IAAI,EAAE,+BAA+B;IACrCC,IAAI,EAAE;EACR,CAAC;EACDC,GAAG,EAAE;IACHC,kBAAkB,EAAE;EACtB;AACF,CAAC,CAAC;AAEF,MAAMC,WAAW,GAAG;EAClBC,IAAI,EAAE,+BAA+B;EACrCC,EAAE,EAAE,oBAAoB;EACxBC,OAAO,EAAE,YAAY;EACrBC,IAAI,EAAE;AACR,CAAC;AAEDd,WAAW,CAACe,QAAQ,CAACL,WAAW,EAAE,CAACM,KAAK,EAAEC,IAAI,KAAK;EACjD,IAAID,KAAK,EAAE;IACTE,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;EAC9C,CAAC,MAAM;IACLE,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEF,IAAI,CAACG,QAAQ,CAAC;EAC3C;AACF,CAAC,CAAC"}},"mtime":1726936652383}}